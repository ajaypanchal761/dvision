const g=()=>{{const e="http://localhost:5000/api".replace(/\/$/,"");return console.log("[Admin API] Using VITE_API_BASE_URL from env:",e),e}},y=g();console.log("[Admin API] Final API_BASE_URL:",y);const T=()=>localStorage.getItem("dvision_admin_token"),E=t=>{localStorage.setItem("dvision_admin_token",t)},S=()=>{localStorage.removeItem("dvision_admin_token")},n=async(t,e={})=>{const s=T(),r=e.body instanceof FormData,c={...e,headers:{...r?{}:{"Content-Type":"application/json"},Accept:"application/json",...s&&{Authorization:`Bearer ${s}`},...e.headers},credentials:"include"};e.body&&typeof e.body=="object"&&!r?c.body=JSON.stringify(e.body):e.body&&(c.body=e.body);const d=`${y}${t}`,l=e.method||"GET";console.log(`[Admin API] ${l} Request:`,{endpoint:t,fullUrl:d,hasToken:!!s,hasBody:!!e.body,isFormData:r}),e.body&&typeof e.body=="object"&&!r&&console.log("[Admin API] Request Body:",e.body);try{console.log("[Admin API] Sending request to:",d);const a=await fetch(d,c);if(console.log("[Admin API] Response received:",{status:a.status,statusText:a.statusText,ok:a.ok,url:a.url}),!a.ok){let o="Something went wrong",i=null;try{i=await a.json(),o=i.message||i.error||o,console.error("[Admin API] Error Response:",{status:a.status,statusText:a.statusText,errorData:i,errorMessage:o})}catch(h){o=a.statusText||o,console.error("[Admin API] Error parsing response:",h),console.error("[Admin API] Error Response (non-JSON):",{status:a.status,statusText:a.statusText,errorMessage:o})}const m=new Error(o);throw m.status=a.status,i&&(m.data=i.data||i,m.errors=i.data?.errors||i.errors),m}const u=a.headers.get("content-type");if(u&&u.includes("application/json")){const o=await a.json();return console.log("[Admin API] Success Response:",{endpoint:t,success:o.success,hasData:!!o.data}),o}else{const o=await a.text();return console.log("[Admin API] Success Response (non-JSON):",{endpoint:t,contentType:u,textLength:o.length}),{success:!0,data:o}}}catch(a){throw a.name==="TypeError"&&a.message.includes("fetch")?(console.error("[Admin API] Network Error:",{endpoint:t,fullUrl:d,error:a.message,errorName:a.name,stack:a.stack}),new Error("Network error. Please check if the server is running.")):(console.error("[Admin API] Request Error:",{endpoint:t,fullUrl:d,error:a.message,errorName:a.name,status:a.status,stack:a.stack}),a)}},b={getDashboardStatistics:async()=>n("/admin/dashboard/statistics",{method:"GET"}),login:async(t,e)=>{const s=await n("/admin/login",{method:"POST",body:{email:t,password:e}});return s.success&&s.data?.token&&E(s.data.token),s},logout:()=>{S()},forgotPassword:async t=>n("/admin/forgot-password",{method:"POST",body:{email:t}}),resetPassword:async(t,e)=>n(`/admin/reset-password/${t}`,{method:"PUT",body:{password:e}}),getMe:async()=>n("/admin/me",{method:"GET"}),updateProfile:async t=>n("/admin/profile",{method:"PUT",body:t}),updateFcmToken:async(t,e="web")=>n("/admin/fcm-token",{method:"PUT",body:{fcmToken:t,platform:e}}),changePassword:async(t,e)=>n("/admin/change-password",{method:"PUT",body:{currentPassword:t,newPassword:e}})},P={getStatistics:async()=>n("/admin/students/statistics",{method:"GET"}),getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/admin/students${e?`?${e}`:""}`,{method:"GET"})},getById:async t=>n(`/admin/students/${t}`,{method:"GET"}),create:async t=>n("/admin/students",{method:"POST",body:t}),update:async(t,e)=>n(`/admin/students/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/admin/students/${t}`,{method:"DELETE"})},p={getStatistics:async()=>n("/admin/teachers/statistics",{method:"GET"}),getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/admin/teachers${e?`?${e}`:""}`,{method:"GET"})},getById:async t=>n(`/admin/teachers/${t}`,{method:"GET"}),create:async t=>n("/admin/teachers",{method:"POST",body:t}),update:async(t,e)=>n(`/admin/teachers/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/admin/teachers/${t}`,{method:"DELETE"})},$={getPublic:async()=>n("/banners",{method:"GET"}),getAll:async()=>n("/banners/admin",{method:"GET"}),getById:async t=>n(`/banners/admin/${t}`,{method:"GET"}),create:async t=>n("/banners/admin",{method:"POST",body:t}),update:async(t,e)=>n(`/banners/admin/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/banners/admin/${t}`,{method:"DELETE"})},A={aboutUs:{get:async()=>n("/about",{method:"GET"}),getAll:async()=>n("/about/admin",{method:"GET"}),create:async t=>n("/about",{method:"POST",body:t}),update:async(t,e)=>n(`/about/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/about/${t}`,{method:"DELETE"})},privacy:{get:async()=>n("/privacy",{method:"GET"}),getAll:async()=>n("/privacy/admin",{method:"GET"}),create:async t=>n("/privacy",{method:"POST",body:t}),update:async(t,e)=>n(`/privacy/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/privacy/${t}`,{method:"DELETE"})},terms:{get:async()=>n("/terms",{method:"GET"}),getAll:async()=>n("/terms/admin",{method:"GET"}),create:async t=>n("/terms",{method:"POST",body:t}),update:async(t,e)=>n(`/terms/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/terms/${t}`,{method:"DELETE"})}},f={getStatistics:async()=>n("/admin/classes/statistics",{method:"GET"}),getAllWithoutPagination:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/admin/classes/all${e?`?${e}`:""}`,{method:"GET"})},getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/admin/classes${e?`?${e}`:""}`,{method:"GET"})},getById:async t=>n(`/admin/classes/${t}`,{method:"GET"}),create:async t=>n("/admin/classes",{method:"POST",body:t}),update:async(t,e)=>n(`/admin/classes/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/admin/classes/${t}`,{method:"DELETE"})},G={getStatistics:async()=>n("/admin/subjects/statistics",{method:"GET"}),getAllWithoutPagination:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/admin/subjects/all${e?`?${e}`:""}`,{method:"GET"})},getAll:async(t={})=>{const e=new URLSearchParams;t.classId&&e.append("classId",t.classId),t.class&&e.append("class",t.class),t.board&&e.append("board",t.board),t.page&&e.append("page",t.page),t.limit&&e.append("limit",t.limit),t.search&&e.append("search",t.search);const s=e.toString(),r=`/admin/subjects${s?`?${s}`:""}`;return n(r,{method:"GET"})},getById:async t=>n(`/admin/subjects/${t}`,{method:"GET"}),create:async t=>n("/admin/subjects",{method:"POST",body:t}),update:async(t,e)=>n(`/admin/subjects/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/admin/subjects/${t}`,{method:"DELETE"})},U={getStatistics:async()=>n("/admin/courses/statistics",{method:"GET"}),getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/admin/courses${e?`?${e}`:""}`,{method:"GET"})},getById:async t=>n(`/admin/courses/${t}`,{method:"GET"}),create:async t=>n("/admin/courses",{method:"POST",body:t}),update:async(t,e)=>n(`/admin/courses/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/admin/courses/${t}`,{method:"DELETE"})},I={getStatistics:async()=>n("/subscription-plans/admin/statistics",{method:"GET"}),getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/subscription-plans/admin${e?`?${e}`:""}`,{method:"GET"})},getById:async t=>n(`/subscription-plans/admin/${t}`,{method:"GET"}),getClassesByBoard:async t=>n(`/subscription-plans/admin/classes/${t}`,{method:"GET"}),getPreparationClasses:async(t=!1)=>n(`/subscription-plans/admin/preparation-classes${t?"?all=true":""}`,{method:"GET"}),create:async t=>n("/subscription-plans/admin",{method:"POST",body:t}),update:async(t,e)=>n(`/subscription-plans/admin/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/subscription-plans/admin/${t}`,{method:"DELETE"})},w={getMonthlyForTeacher:async(t,e,s)=>{const r=new URLSearchParams;e&&r.append("year",String(e)),s&&r.append("month",String(s));const c=r.toString()?`?${r.toString()}`:"";return n(`/admin/teachers/${t}/attendance${c}`,{method:"GET"})},getAll:async(t={})=>{const e=new URLSearchParams(t).toString(),s=e?`?${e}`:"";return n(`/admin/teachers/attendance${s}`,{method:"GET"})}},L={getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/payment/admin${e?`?${e}`:""}`,{method:"GET"})},getStats:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/payment/admin/stats${e?`?${e}`:""}`,{method:"GET"})}},q={getStatistics:async()=>n("/doubts/statistics",{method:"GET"}),getAllDoubts:async(t={})=>{const e=new URLSearchParams;t.status&&e.append("status",t.status),t.page&&e.append("page",t.page),t.limit&&e.append("limit",t.limit),t.search&&e.append("search",t.search);const s=e.toString();return n(`/doubts${s?`?${s}`:""}`,{method:"GET"})},getDoubtById:async t=>n(`/doubts/${t}`,{method:"GET"}),answerDoubt:async(t,e)=>n(`/doubts/${t}/answer`,{method:"PUT",body:{answer:e}}),updateDoubtStatus:async(t,e)=>n(`/doubts/${t}/status`,{method:"PUT",body:{status:e}}),deleteDoubt:async t=>n(`/doubts/${t}`,{method:"DELETE"})},R={getStatistics:async()=>n("/admin/quizzes/statistics",{method:"GET"}),getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/admin/quizzes${e?`?${e}`:""}`,{method:"GET"})},getById:async t=>n(`/admin/quizzes/${t}`,{method:"GET"}),create:async t=>n("/admin/quizzes",{method:"POST",body:t}),update:async(t,e)=>n(`/admin/quizzes/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/admin/quizzes/${t}`,{method:"DELETE"}),getResults:async t=>n(`/admin/quizzes/${t}/results`,{method:"GET"})},k={getStatistics:async()=>n("/timetables/admin/statistics",{method:"GET"}),getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/timetables/admin${e?`?${e}`:""}`,{method:"GET"})},getById:async t=>n(`/timetables/admin/${t}`,{method:"GET"}),create:async t=>n("/timetables/admin",{method:"POST",body:t}),createBulk:async t=>n("/timetables/admin/bulk",{method:"POST",body:t}),update:async(t,e)=>n(`/timetables/admin/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/timetables/admin/${t}`,{method:"DELETE"}),getSubjectsByClass:async t=>n(`/timetables/admin/subjects/${t}`,{method:"GET"}),getTeachersBySubject:async t=>n(`/timetables/admin/teachers/${t}`,{method:"GET"})},D={getMyNotifications:async()=>n("/notifications",{method:"GET"}),getUnreadCount:async()=>n("/notifications/unread-count",{method:"GET"}),markAsRead:async(t=[])=>n("/notifications/mark-read",{method:"PUT",body:{notificationIds:t}}),deleteNotifications:async t=>n("/notifications",{method:"DELETE",body:{notificationIds:t}}),deleteAllNotifications:async()=>n("/notifications/all",{method:"DELETE"}),getFilteredStudents:async(t=null,e=null)=>{let s="/notifications/admin/students";const r=new URLSearchParams;return t&&r.append("class",t),e&&r.append("board",e),r.toString()&&(s+=`?${r.toString()}`),n(s,{method:"GET"})},getFilteredTeachers:async(t=null)=>{let e="/notifications/admin/teachers";const s=new URLSearchParams;return t&&s.append("class",t),s.toString()&&(e+=`?${s.toString()}`),n(e,{method:"GET"})},sendNotification:async t=>n("/notifications/admin/send",{method:"POST",body:t}),getHistory:async(t=null,e=50)=>{let s="/notifications/admin/history";const r=new URLSearchParams;return t&&r.append("recipientType",t),e&&r.append("limit",e),r.toString()&&(s+=`?${r.toString()}`),n(s,{method:"GET"})},getAllCampaigns:async(t={})=>{const e=new URLSearchParams;t.page&&e.append("page",t.page),t.limit&&e.append("limit",t.limit),t.search&&e.append("search",t.search);const s=e.toString(),r=`/notifications/admin/campaigns${s?`?${s}`:""}`;return n(r,{method:"GET"})},getCampaign:async t=>n(`/notifications/admin/campaigns/${t}`,{method:"GET"}),createCampaign:async t=>n("/notifications/admin/campaigns",{method:"POST",body:t}),updateCampaign:async(t,e)=>n(`/notifications/admin/campaigns/${t}`,{method:"PUT",body:e}),deleteCampaign:async t=>n(`/notifications/admin/campaigns/${t}`,{method:"DELETE"}),sendCampaign:async t=>n(`/notifications/admin/campaigns/${t}/send`,{method:"POST"})},B={getStatistics:async()=>n("/admin/agents/statistics",{method:"GET"}),create:async t=>n("/admin/agents",{method:"POST",body:t}),getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/admin/agents${e?`?${e}`:""}`,{method:"GET"})},getById:async t=>n(`/admin/agents/${t}`,{method:"GET"}),update:async(t,e)=>n(`/admin/agents/${t}`,{method:"PUT",body:e}),delete:async t=>n(`/admin/agents/${t}`,{method:"DELETE"}),getReferrals:async(t,e={})=>{const s=new URLSearchParams(e).toString();return n(`/admin/agents/${t}/referrals${s?`?${s}`:""}`,{method:"GET"})}},O={getStatistics:async()=>n("/admin/live-classes/statistics",{method:"GET"}),getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/admin/live-classes${e?`?${e}`:""}`,{method:"GET"})},getById:async t=>n(`/admin/live-classes/${t}`,{method:"GET"})},v={getStatistics:async()=>n("/admin/recordings/statistics",{method:"GET"}),getAll:async(t={})=>{const e=new URLSearchParams(t).toString();return n(`/admin/recordings${e?`?${e}`:""}`,{method:"GET"})},getById:async t=>n(`/admin/recordings/${t}`,{method:"GET"})};export{b as a,I as b,f as c,w as d,G as e,U as f,$ as g,k as h,q as i,A as j,B as k,O as l,D as n,L as p,R as q,v as r,P as s,p as t};
