import{u as P,a as R,r as a,R as g,j as e}from"./index-BPKQ2keO.js";import{l as O}from"./logo-BJrYxb4d.js";import{I as M}from"./Image-B5_LYj-X.js";const I=()=>{const i=P(),{verifyOTP:f,resendOTP:v}=R(),[n,d]=a.useState(""),[m,c]=a.useState(!1),[x,u]=a.useState(!1),[h,l]=a.useState(""),[o,p]=a.useState(""),[w,b]=a.useState(!1),r=a.useRef(null);a.useEffect(()=>{const s=sessionStorage.getItem("login_phone"),t=sessionStorage.getItem("registration_phone");if(s)p(s),b(!1);else if(t)p(t),b(!0);else{i(g.LOGIN);return}r.current&&r.current.focus()},[i]);const j=s=>{const t=s.target.value.replace(/\D/g,"").slice(0,6);d(t),l("")},y=s=>{s.preventDefault();const t=s.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);d(t)},N=async s=>{if(s.preventDefault(),n.length!==6){l("Please enter complete 6-digit OTP");return}c(!0),l("");try{const t=await f(o,n);t.success?(sessionStorage.removeItem("login_phone"),sessionStorage.removeItem("registration_phone"),i(g.DASHBOARD)):l(t.message||"Invalid OTP. Please try again.")}catch(t){l(t.message||"Something went wrong. Please try again.")}finally{c(!1)}},L=async()=>{u(!0),l("");try{const s=await v(o);s.success?(alert("OTP resent successfully!"),d(""),r.current&&r.current.focus()):l(s.message||"Failed to resend OTP")}catch(s){l(s.message||"Failed to resend OTP")}finally{u(!1)}},T=n.length===6;return e.jsxs("div",{className:"min-h-screen w-full bg-white flex flex-col",children:[e.jsxs("div",{className:"bg-[var(--app-dark-blue)] text-white h-24 sm:h-28 md:h-32 relative overflow-hidden",style:{borderBottomRightRadius:"200px"},children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-12 sm:h-14 md:h-16 overflow-hidden",children:e.jsxs("svg",{className:"absolute bottom-0 w-full h-full",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0,60 Q300,20 600,60 T1200,60 L1200,120 L0,120 Z",fill:"rgba(255,255,255,0.1)",children:e.jsx("animate",{attributeName:"d",values:"M0,60 Q300,20 600,60 T1200,60 L1200,120 L0,120 Z;M0,60 Q300,40 600,60 T1200,60 L1200,120 L0,120 Z;M0,60 Q300,20 600,60 T1200,60 L1200,120 L0,120 Z",dur:"3s",repeatCount:"indefinite"})}),e.jsx("path",{d:"M0,80 Q300,40 600,80 T1200,80 L1200,120 L0,120 Z",fill:"rgba(255,255,255,0.05)",children:e.jsx("animate",{attributeName:"d",values:"M0,80 Q300,40 600,80 T1200,80 L1200,120 L0,120 Z;M0,80 Q300,60 600,80 T1200,80 L1200,120 L0,120 Z;M0,80 Q300,40 600,80 T1200,80 L1200,120 L0,120 Z",dur:"4s",repeatCount:"indefinite"})})]})}),e.jsx("div",{className:"absolute top-3 right-6 w-16 h-16 sm:w-20 sm:h-20 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute top-8 right-16 w-12 h-12 sm:w-16 sm:h-16 bg-white/5 rounded-full blur-lg"}),e.jsx("div",{className:"absolute bottom-6 left-10 w-20 h-20 sm:w-24 sm:h-24 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"pt-5 sm:pt-6 md:pt-8 px-4 sm:px-6 md:px-8 relative z-10",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>i(-1),className:"p-1.5 sm:p-2 text-white hover:bg-white/10 rounded-full transition-colors",children:e.jsx("span",{className:"text-lg sm:text-xl md:text-2xl font-extrabold",children:"‚Üê"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-white/90 mb-0.5 sm:mb-1",children:"Verification"}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-white",children:"Verify OTP"})]})]})})]}),e.jsxs("div",{className:"flex-1 px-4 sm:px-6 md:px-8 py-4 sm:py-6 md:py-8 flex items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-48 h-48 sm:w-64 sm:h-64 bg-[var(--app-dark-blue)]/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-60 h-60 sm:w-80 sm:h-80 bg-[var(--app-teal)]/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-72 h-72 sm:w-96 sm:h-96 bg-[var(--app-dark-blue)]/3 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"w-full max-w-sm sm:max-w-md relative z-10",children:[e.jsx("div",{className:"mb-4 sm:mb-5 md:mb-6 flex justify-center",children:e.jsx(M,{src:O,alt:"D'Vision Academy Logo",className:"h-28 sm:h-32 md:h-36 lg:h-40 w-auto object-contain"})}),e.jsx("div",{className:"text-center mb-4 sm:mb-5 md:mb-6",children:e.jsxs("p",{className:"text-black/80 text-xs sm:text-sm md:text-base mb-2",children:["Enter the 6-digit code sent to ",o?o.replace(/\d(?=\d{4})/g,"*"):"your mobile number"]})}),e.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl md:rounded-3xl p-3 sm:p-4 md:p-5 lg:p-6 shadow-2xl border border-gray-200",children:e.jsxs("form",{onSubmit:N,className:"space-y-3 sm:space-y-4 md:space-y-5",children:[h&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 md:py-2.5 rounded-lg sm:rounded-xl text-[10px] sm:text-xs md:text-sm",children:h}),e.jsx("div",{children:e.jsx("input",{ref:r,type:"tel",inputMode:"numeric",maxLength:6,value:n,onChange:j,onPaste:y,placeholder:"Enter 6-digit OTP",className:"w-full px-2 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-3 rounded-lg sm:rounded-xl border-0 bg-gray-50 focus:outline-none focus:bg-white transition-all text-base sm:text-lg md:text-xl lg:text-2xl font-semibold text-[var(--app-black)] placeholder:text-gray-400 text-center tracking-wider",required:!0})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1 sm:mb-1.5",children:"Didn't receive the code?"}),e.jsx("button",{type:"button",onClick:L,disabled:x,className:"text-[var(--app-dark-blue)] font-semibold text-xs sm:text-sm hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Resending...":"Resend OTP"})]}),e.jsx("button",{type:"submit",disabled:!T||m,className:"w-full bg-[var(--app-dark-blue)] text-white py-3 sm:py-4 md:py-4.5 rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm md:text-base hover:opacity-90 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Verifying...":w?"Verify & Complete Registration":"Verify & Login"})]})})]})]}),e.jsxs("div",{className:"bg-[var(--app-dark-blue)] h-16 sm:h-20 md:h-24 relative mt-auto overflow-hidden",style:{borderTopLeftRadius:"300px"},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden",children:e.jsxs("svg",{className:"absolute top-0 w-full h-full",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0,40 Q300,80 600,40 T1200,40 L1200,0 L0,0 Z",fill:"rgba(255,255,255,0.1)",children:e.jsx("animate",{attributeName:"d",values:"M0,40 Q300,80 600,40 T1200,40 L1200,0 L0,0 Z;M0,40 Q300,60 600,40 T1200,40 L1200,0 L0,0 Z;M0,40 Q300,80 600,40 T1200,40 L1200,0 L0,0 Z",dur:"3s",repeatCount:"indefinite"})}),e.jsx("path",{d:"M0,20 Q300,60 600,20 T1200,20 L1200,0 L0,0 Z",fill:"rgba(255,255,255,0.05)",children:e.jsx("animate",{attributeName:"d",values:"M0,20 Q300,60 600,20 T1200,20 L1200,0 L0,0 Z;M0,20 Q300,40 600,20 T1200,20 L1200,0 L0,0 Z;M0,20 Q300,60 600,20 T1200,20 L1200,0 L0,0 Z",dur:"4s",repeatCount:"indefinite"})})]})}),e.jsx("div",{className:"absolute bottom-3 left-6 w-16 h-16 sm:w-20 sm:h-20 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-8 left-16 w-12 h-12 sm:w-16 sm:h-16 bg-white/5 rounded-full blur-lg"}),e.jsx("div",{className:"absolute top-6 right-10 w-20 h-20 sm:w-24 sm:h-24 bg-white/10 rounded-full blur-xl"})]})]})};export{I as default};
