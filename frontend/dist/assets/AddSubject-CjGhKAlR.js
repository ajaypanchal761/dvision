import{u as p,r as i,j as e}from"./index-BPKQ2keO.js";import{c as f,e as j}from"./api-BdrZRD_7.js";const N=()=>{const o=p(),[a,c]=i.useState({name:"",classId:"",isActive:!0}),[d,b]=i.useState([]),[r,m]=i.useState(!1),[g,x]=i.useState(!0),[u,n]=i.useState("");i.useEffect(()=>{(async()=>{try{x(!0);const t=await f.getAllWithoutPagination({isActive:!0});t.success&&t.data?.classes&&b(t.data.classes)}catch(t){console.error("Error fetching data:",t),n("Failed to load data. Please refresh the page.")}finally{x(!1)}})()},[]);const h=async s=>{s.preventDefault(),n(""),m(!0);const t={name:a.name.trim(),classId:a.classId,isActive:a.isActive};console.log("Submitting subject data:",t);try{const l=await j.create(t);console.log("API Response:",l),l.success?o("/admin/subjects"):n(l.message||"Failed to create subject")}catch(l){console.error("Error creating subject:",l),n(l.message||"Failed to create subject. Please try again.")}finally{m(!1)}};return g?e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1e3a5f] mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 font-medium text-xs sm:text-sm",children:"Loading data..."})]})}):e.jsx("div",{className:"min-h-screen bg-white",children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pt-3 sm:pt-4 md:pt-5 lg:pt-6",children:[e.jsx("div",{className:"pb-0",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[e.jsx("button",{onClick:()=>o("/admin/subjects"),className:"text-[#1e3a5f] hover:text-[#2a4a6f] transition-colors p-1",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-[#1e3a5f]",children:"Add New Subject"})]})}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-lg text-xs sm:text-sm mt-2",children:u}),e.jsx("div",{className:"mt-2 sm:mt-3",children:e.jsxs("form",{onSubmit:h,className:"bg-white rounded-lg shadow-md border border-gray-200 p-3 sm:p-4 md:p-5 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:["Class / Preparation Class ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:a.classId,onChange:s=>c({...a,classId:s.target.value}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 bg-white",disabled:r||d.length===0,children:[e.jsx("option",{value:"",children:"Select Class or Preparation Class"}),d.map(s=>{const t=s.type==="preparation"?`${s.name} (${s.classCode})`:`Class ${s.class} - ${s.board} (${s.classCode})`;return e.jsx("option",{value:s._id,children:t},s._id)})]}),d.length===0&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No classes available. Please create a class first."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:["Subject Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:s=>c({...a,name:s.target.value}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200",placeholder:"Enter subject name (e.g., Mathematics)",disabled:r})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:a.isActive?"Active":"Inactive",onChange:s=>c({...a,isActive:s.target.value==="Active"}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 bg-white",disabled:r,children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 sm:gap-3 pt-3 sm:pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o("/admin/subjects"),disabled:r,className:"w-full sm:w-auto px-4 sm:px-6 py-2 text-xs sm:text-sm border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"w-full sm:w-auto px-4 sm:px-6 py-2 text-xs sm:text-sm bg-gradient-to-r from-[#1e3a5f] to-[#2a4a6f] hover:from-[#2a4a6f] hover:to-[#1e3a5f] text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:r?"Creating...":"Add Subject"})]})]})})]})})};export{N as default};
