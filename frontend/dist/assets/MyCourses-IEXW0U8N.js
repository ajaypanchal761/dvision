import{u as N,a as w,r as n,j as s,c as k,i as u,D as C,v as I,s as $}from"./index-BPKQ2keO.js";import{B as P}from"./BottomNav-KrGopomG.js";import{I as A}from"./Image-B5_LYj-X.js";import{s as b,a as h,b as g,c as f,d as E}from"./sub5-ll-uW0t5.js";const F=()=>{const r=N(),{user:m,hasActiveSubscription:j}=w(),[c,d]=n.useState([]),[y,o]=n.useState(!0);m?.class,m?.board;const v=(l,a)=>{const t=[b,h,g,f,E],e=l.toLowerCase();return e.includes("math")||e.includes("mathematics")?b:e.includes("science")||e.includes("physics")||e.includes("chemistry")||e.includes("biology")?h:e.includes("english")?g:e.includes("hindi")?f:t[a%t.length]};n.useEffect(()=>{m&&(async()=>{try{o(!0);const a=await $.getCourses();if(a.success&&a.data?.courses){const t=a.data.courses.map((e,i)=>({id:e._id,name:e.title,thumbnail:e.thumbnail,description:e.description||"",subject:e.subject,subjects:[e.subject],class:e.class,board:e.board,classId:e.classId,chapters:e.chapters||[],status:e.status,teacherName:null}));d(t)}else d([])}catch(a){console.error("Error fetching courses:",a),d([])}finally{o(!1)}})()},[m]);const x=n.useMemo(()=>{const l=new Map;let a=0;return c.forEach(t=>{const e=t.subjects||(t.subject?[t.subject]:[]);e&&Array.isArray(e)&&e.length>0&&e.forEach(i=>{const p=`${t.id}-${i}`;l.has(p)||(l.set(p,{subject:i,course:t,courseId:t.id,image:t.thumbnail||v(i,a)}),a++)})}),Array.from(l.values())},[c]);return s.jsxs("div",{className:"min-h-screen w-full bg-white",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-[var(--app-dark-blue)] text-white relative animate-fade-in",style:{borderRadius:"0 0 50% 50% / 0 0 30px 30px"},children:s.jsx("div",{className:"px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6 pb-4 sm:pb-6 md:pb-8",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("button",{onClick:()=>r(-1),className:"p-1.5 sm:p-2 text-white hover:bg-white/10 rounded-full transition-colors hover:scale-110",children:s.jsx(k,{className:"text-lg sm:text-xl md:text-2xl"})}),s.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold animate-slide-in-left",children:"My Courses"})]})})}),s.jsx("main",{className:"px-3 sm:px-4 md:px-6 py-4 sm:py-5 md:py-6 pb-20 sm:pb-24",children:s.jsx("div",{className:"space-y-3 sm:space-y-4 md:space-y-5",children:y?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[40vh] py-8 sm:py-10 md:py-12",children:[s.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 border-4 border-[var(--app-dark-blue)] border-t-transparent rounded-full animate-spin mb-3 sm:mb-4"}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base font-medium",children:"Loading courses..."})]}):j?x.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[40vh] py-8 sm:py-10 md:py-12",children:[s.jsx("div",{className:"w-16 h-16 sm:w-18 sm:h-18 md:w-20 md:h-20 bg-[var(--app-dark-blue)]/10 rounded-full flex items-center justify-center mb-4 sm:mb-5 md:mb-6",children:s.jsx(u,{className:"text-[var(--app-dark-blue)] text-3xl sm:text-4xl"})}),s.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-1.5 sm:mb-2 text-center",children:"No courses available"}),s.jsx("p",{className:"text-gray-500 text-center max-w-md text-xs sm:text-sm md:text-base px-3 sm:px-4",children:"No courses available for your subscription. Please check back later."})]}):x.map((l,a)=>{const t=l.course;return s.jsxs("div",{className:`bg-white rounded-lg sm:rounded-xl shadow-lg overflow-hidden border border-gray-200 hover:shadow-xl transition-all duration-300 cursor-pointer ${a%2===0?"animate-slide-in-left":"animate-slide-in-right"}`,style:{animationDelay:`${a*.15}s`},onClick:()=>r(`/course/${t.id}`),children:[s.jsxs("div",{className:"relative h-40 sm:h-48 md:h-56 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0",children:s.jsx(A,{src:t.thumbnail||l.image,alt:`${t.name} - ${l.subject}`,className:"w-full h-full object-cover"})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),s.jsx("div",{className:"absolute bottom-3 sm:bottom-4 left-3 sm:left-4",children:s.jsxs("button",{onClick:e=>{e.stopPropagation(),r(`/course/${t.id}`)},className:"bg-white text-[var(--app-dark-blue)] px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg sm:rounded-xl flex items-center gap-1.5 sm:gap-2 hover:bg-gray-100 hover:scale-105 transition-all duration-300 shadow-lg font-bold text-xs sm:text-sm",children:[s.jsx(C,{className:"text-sm sm:text-base md:text-lg"}),s.jsx("span",{children:"Watch Preview"})]})})]}),s.jsxs("div",{className:"p-3 sm:p-4 md:p-5 bg-white",children:[s.jsx("h5",{className:"text-sm sm:text-base md:text-lg font-bold text-gray-800 mb-1.5 sm:mb-2 leading-tight line-clamp-2",children:t.name}),s.jsx("div",{className:"mb-2 sm:mb-2.5 md:mb-3",children:t.classId?s.jsx("span",{className:"text-xs sm:text-sm font-semibold text-purple-600 bg-purple-50 px-2 py-1 rounded",children:t.classId.name||"Preparation Class"}):s.jsxs("span",{className:"text-xs sm:text-sm font-semibold text-gray-600",children:[t.board," Â· Class ",t.class]})}),s.jsx("div",{className:"space-y-1.5 sm:space-y-2 mb-3 sm:mb-4",children:s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx("div",{className:"p-1 sm:p-1.5 bg-[var(--app-dark-blue)]/10 rounded-lg",children:s.jsx(I,{className:"text-[var(--app-dark-blue)] text-xs sm:text-sm"})}),s.jsx("span",{className:"text-gray-700 text-xs sm:text-sm font-medium",children:"Chapter-wise full syllabus notes"})]})}),s.jsx("button",{onClick:e=>{e.stopPropagation(),r(`/course/${t.id}`)},className:"w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 sm:py-2.5 md:py-3 rounded-lg sm:rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl text-xs sm:text-sm md:text-base",children:"View full schedule"})]})]},`${l.subject}-${a}`)}):s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[40vh] py-8 sm:py-10 md:py-12",children:[s.jsx("div",{className:"w-16 h-16 sm:w-18 sm:h-18 md:w-20 md:h-20 bg-[var(--app-dark-blue)]/10 rounded-full flex items-center justify-center mb-4 sm:mb-5 md:mb-6",children:s.jsx(u,{className:"text-[var(--app-dark-blue)] text-3xl sm:text-4xl"})}),s.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-1.5 sm:mb-2 text-center",children:"No Subscription"}),s.jsx("p",{className:"text-gray-500 text-center max-w-md text-xs sm:text-sm md:text-base px-3 sm:px-4 mb-4",children:"You need an active subscription to access courses. Please subscribe to a plan to continue learning."}),s.jsx("button",{onClick:()=>r("/subscription-plans"),className:"bg-[var(--app-dark-blue)] hover:bg-blue-700 text-white font-bold py-2.5 sm:py-3 px-6 sm:px-8 rounded-lg sm:rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl text-xs sm:text-sm md:text-base",children:"View Subscription Plans"})]})})}),s.jsx(P,{})]})};export{F as default};
