import{u as F,r as t,j as e,a2 as W,S as P,a9 as I,y as T}from"./index-BPKQ2keO.js";import{q as y,c as O,e as V}from"./api-BdrZRD_7.js";const H=()=>{const o=F(),[c,w]=t.useState([]),[v,g]=t.useState(!0),[N,x]=t.useState(!1),[k,h]=t.useState(null),[n,z]=t.useState(""),[r,u]=t.useState(null),[C,m]=t.useState(!1),[a,L]=t.useState(""),[d,b]=t.useState(""),[f,S]=t.useState([]),[_,A]=t.useState([]);t.useEffect(()=>{j(),Q()},[a,d]),t.useEffect(()=>{a&&d&&M()},[a,d]);const j=async()=>{try{g(!0);const s={};a&&(s.classNumber=a),d&&(s.board=d);const l=await y.getAll(s);l.success&&l.data.quizzes&&w(l.data.quizzes)}catch(s){console.error("Error fetching quizzes:",s),alert("Failed to load quizzes. Please try again.")}finally{g(!1)}},Q=async()=>{try{const s=await O.getAllWithoutPagination({isActive:!0});s.success&&s.data.classes&&S(s.data.classes)}catch(s){console.error("Error fetching classes:",s)}},M=async()=>{try{const s=await V.getAll({class:a,board:d});s.success&&s.data.subjects&&A(s.data.subjects)}catch(s){console.error("Error fetching subjects:",s)}},B=s=>{h(s),x(!0)},E=async()=>{try{await y.delete(k),x(!1),h(null),await j(),alert("Quiz deleted successfully!")}catch(s){console.error("Error deleting quiz:",s),alert(s.message||"Failed to delete quiz. Please try again.")}},p=c.filter(s=>s.name?.toLowerCase().includes(n.toLowerCase())||s.subjectId?.name?.toLowerCase().includes(n.toLowerCase())),q=()=>{const s=new Set;return f.forEach(l=>{l.board&&s.add(l.board)}),Array.from(s)};return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pt-3 sm:pt-4 md:pt-5 lg:pt-6",children:[e.jsx("div",{className:"pb-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-white",children:"Manage Quizzes"})}),e.jsxs("button",{onClick:()=>o("/admin/quiz/add"),className:"px-3 sm:px-4 md:px-5 lg:px-6 py-2 sm:py-2.5 md:py-3 bg-gradient-to-r from-[#1e3a5f] to-[#2a4a6f] hover:from-[#2a4a6f] hover:to-[#1e3a5f] text-white rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm md:text-base transition-all duration-200 flex items-center justify-center space-x-2 shadow-md hover:shadow-lg",children:[e.jsx(W,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{children:"Add Quiz"})]})]})}),e.jsx("div",{className:"mt-3 sm:mt-4 md:mt-5 lg:mt-6",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4 lg:gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-2.5 sm:p-3 md:p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-gray-500 text-xs font-medium",children:"Total Quizzes"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mt-0.5",children:c.length})]}),e.jsx("div",{className:"h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8 rounded-lg bg-purple-100 flex items-center justify-center flex-shrink-0 ml-2",children:e.jsx("svg",{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg shadow-md p-2.5 sm:p-3 md:p-4 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-gray-500 text-xs sm:text-sm font-medium",children:"Active Quizzes"}),e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 mt-0.5 sm:mt-1",children:c.filter(s=>s.isActive).length})]}),e.jsx("div",{className:"h-7 w-7 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 rounded-lg bg-green-100 flex items-center justify-center flex-shrink-0 ml-2",children:e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 lg:w-6 lg:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg shadow-md p-2.5 sm:p-3 md:p-4 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-gray-500 text-xs sm:text-sm font-medium",children:"Filtered Results"}),e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 mt-0.5 sm:mt-1",children:p.length})]}),e.jsx("div",{className:"h-7 w-7 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 rounded-lg bg-orange-100 flex items-center justify-center flex-shrink-0 ml-2",children:e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 lg:w-6 lg:h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})})]})})]})}),e.jsx("div",{className:"mt-3 sm:mt-4 md:mt-5 lg:mt-6 bg-white rounded-lg sm:rounded-xl md:rounded-2xl shadow-lg border border-gray-100 p-3 sm:p-4 md:p-5 lg:p-6",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(P,{className:"h-4 w-4 sm:h-5 sm:w-5 text-dvision-blue"})}),e.jsx("input",{type:"text",placeholder:"Search by quiz name or subject...",value:n,onChange:s=>z(s.target.value),className:"w-full pl-9 sm:pl-12 pr-3 sm:pr-4 py-2 sm:py-2.5 md:py-3 border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-dvision-blue focus:border-dvision-blue outline-none transition-all duration-200 text-sm sm:text-base text-gray-700 placeholder-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"Class"}),e.jsxs("select",{value:a,onChange:s=>{L(s.target.value),b("")},className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-dvision-blue focus:border-dvision-blue outline-none transition-all text-sm sm:text-base bg-white",children:[e.jsx("option",{value:"",children:"All Classes"}),f.map(s=>e.jsxs("option",{value:s.classNumber,children:["Class ",s.classNumber]},s._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"Board"}),e.jsxs("select",{value:d,onChange:s=>b(s.target.value),disabled:!a,className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-dvision-blue focus:border-dvision-blue outline-none transition-all text-sm sm:text-base bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"All Boards"}),q().map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})]})}),v?e.jsxs("div",{className:"flex items-center justify-center py-6 sm:py-8 mt-4",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 sm:h-10 sm:w-10 border-b-2 border-[#1e3a5f]"}),e.jsx("p",{className:"ml-3 text-gray-500 text-xs sm:text-sm",children:"Loading quizzes..."})]}):e.jsx("div",{className:"mt-3 sm:mt-4 md:mt-5 lg:mt-6 bg-white rounded-lg sm:rounded-xl md:rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:p.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 sm:px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Quiz Name"}),e.jsx("th",{className:"px-2 sm:px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-2 sm:px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider hidden sm:table-cell",children:"Course"}),e.jsx("th",{className:"px-2 sm:px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Class"}),e.jsx("th",{className:"px-2 sm:px-3 py-2 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:p.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-all duration-200",children:[e.jsx("td",{className:"px-2 sm:px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:s.name})}),e.jsx("td",{className:"px-2 sm:px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-0.5 inline-flex text-[10px] sm:text-xs font-medium rounded-lg bg-green-100 text-green-700",children:s.subjectId?.name||"Unknown Subject"})}),e.jsx("td",{className:"px-2 sm:px-3 py-2 whitespace-nowrap hidden sm:table-cell",children:e.jsx("span",{className:"px-2 py-0.5 inline-flex text-[10px] sm:text-xs font-medium rounded-lg bg-purple-100 text-purple-700",children:s.board})}),e.jsx("td",{className:"px-2 sm:px-3 py-2 whitespace-nowrap",children:e.jsxs("span",{className:"px-2 py-0.5 inline-flex text-[10px] sm:text-xs font-medium rounded-lg bg-blue-50 text-[#1e3a5f]",children:["Class ",s.classNumber]})}),e.jsx("td",{className:"px-2 sm:px-3 py-2 whitespace-nowrap text-right text-xs font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>{u(s),m(!0)},className:"p-1.5 sm:p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"View Details",children:e.jsxs("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:()=>o(`/admin/quiz/edit/${s._id}`),className:"p-1.5 sm:p-2 text-[#1e3a5f] hover:bg-[#1e3a5f]/10 rounded-lg transition-colors",title:"Edit Quiz",children:e.jsx(I,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),e.jsx("button",{onClick:()=>B(s._id),className:"p-1.5 sm:p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Quiz",children:e.jsx(T,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]})})]},s._id))})]}):e.jsx("div",{className:"p-6 sm:p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full bg-gray-100 flex items-center justify-center mb-2 sm:mb-3",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("p",{className:"text-gray-500 font-medium text-xs sm:text-sm",children:n?"No quizzes found matching your search.":"No quizzes found."}),e.jsx("p",{className:"text-gray-400 text-[10px] sm:text-xs mt-1",children:n?"Try adjusting your search criteria.":"Create your first quiz to get started."})]})})})})]}),C&&r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl md:rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden transform transition-all flex flex-col",children:[e.jsx("div",{className:"p-4 sm:p-6 md:p-8 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap mt-2",children:[e.jsxs("span",{className:"px-2 sm:px-3 py-1 rounded-md text-xs sm:text-sm font-medium bg-dvision-blue/10 text-dvision-blue",children:["Class ",r.classNumber]}),e.jsx("span",{className:"px-2 sm:px-3 py-1 rounded-md text-xs sm:text-sm font-medium bg-purple-100 text-purple-700",children:r.board}),e.jsx("span",{className:"px-2 sm:px-3 py-1 rounded-md text-xs sm:text-sm font-medium bg-green-100 text-green-700",children:r.subjectId?.name||"Unknown Subject"}),e.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-semibold ${r.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:r.isActive?"Active":"Inactive"})]})]}),e.jsx("button",{onClick:()=>{m(!1),u(null)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 md:p-8",children:e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsxs("h4",{className:"text-sm sm:text-base md:text-lg font-bold text-gray-900 mb-3 sm:mb-4",children:["Questions (",r.questions?.length||0,")"]}),e.jsx("div",{className:"space-y-4 sm:space-y-5",children:r.questions&&r.questions.length>0?r.questions.map((s,l)=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 sm:p-5 border-2 border-gray-200",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-1",children:["Question ",l+1,":"]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-900 font-medium",children:s.question})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2",children:"Options:"}),s.options&&s.options.map((D,i)=>e.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg ${s.correctAnswer===i?"bg-green-100 border-2 border-green-500":"bg-white border-2 border-gray-200"}`,children:[s.correctAnswer===i&&e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:`text-xs sm:text-sm ${s.correctAnswer===i?"text-green-800 font-semibold":"text-gray-700"}`,children:[String.fromCharCode(65+i),". ",D]})]},i))]})]},l)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No questions available"})})]})}),e.jsxs("div",{className:"p-4 sm:p-6 md:p-8 border-t border-gray-200 flex-shrink-0 flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>{m(!1),u(null)},className:"px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 border-2 border-gray-300 text-gray-700 rounded-lg sm:rounded-xl font-semibold hover:bg-gray-50 transition-all duration-200 text-sm sm:text-base",children:"Close"}),e.jsx("button",{onClick:()=>{m(!1),o(`/admin/quiz/edit/${r._id}`)},className:"px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 bg-dvision-blue hover:bg-dvision-blue-dark text-white rounded-lg sm:rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl text-sm sm:text-base",children:"Edit Quiz"})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl md:rounded-2xl shadow-2xl max-w-md w-full transform transition-all",children:e.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 mx-auto bg-red-100 rounded-lg sm:rounded-xl md:rounded-2xl mb-4 sm:mb-5 md:mb-6",children:e.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 text-center mb-2",children:"Delete Quiz"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 text-center mb-6 sm:mb-7 md:mb-8",children:"Are you sure you want to delete this quiz? This action cannot be undone."}),e.jsxs("div",{className:"flex items-center justify-center space-x-3 sm:space-x-4",children:[e.jsx("button",{onClick:()=>{x(!1),h(null)},className:"px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 border-2 border-gray-300 text-gray-700 rounded-lg sm:rounded-xl font-semibold hover:bg-gray-50 transition-all duration-200 text-sm sm:text-base",children:"Cancel"}),e.jsx("button",{onClick:E,className:"px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg sm:rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl text-sm sm:text-base",children:"Delete"})]})]})})})]})};export{H as default};
