import{r as l,j as e,a0 as A,a1 as F}from"./index-BPKQ2keO.js";import{B as P}from"./BottomNav-BGePCkyK.js";import{b as Y}from"./api-CVReUq8b.js";const C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],L=()=>{const n=new Date,[r,h]=l.useState(n.getFullYear()),[a,u]=l.useState(n.getMonth()),[j,i]=l.useState([]),[v,g]=l.useState(!0),[b,p]=l.useState("");l.useEffect(()=>{(async()=>{try{g(!0),p("");const t=await Y.getMyMonthly(r,a+1);t.success&&t.data?.records?i(t.data.records):i([])}catch(t){console.error("Error fetching attendance:",t),p(t.message||"Failed to load attendance"),i([])}finally{g(!1)}})()},[r,a]);const f=new Date(r,a,1),N=new Date(r,a+1,0);f.getDay();const w=N.getDate(),D=s=>{const t=new Date(r,a,s);if(t>n)return"";const o=t.getFullYear(),c=t.getMonth(),m=t.getDate();return j.find(d=>{const x=new Date(d.date);return x.getFullYear()===o&&x.getMonth()===c&&x.getDate()===m&&d.status==="present"})?"P":"A"},M=()=>{u(s=>s===0?(h(t=>t-1),11):s-1)},S=()=>{u(s=>s===11?(h(t=>t+1),0):s+1)},k=new Date(r,a,1).toLocaleDateString("en-IN",{month:"long",year:"numeric"});return e.jsxs("div",{className:"min-h-screen bg-white pb-20 sm:pb-24",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-[var(--app-dark-blue)] text-white relative",style:{borderRadius:"0 0 50% 50% / 0 0 30px 30px"},children:e.jsx("div",{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-6 sm:pb-8",children:e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:"My Attendance"})})}),e.jsx("div",{className:"px-4 sm:px-6 py-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 md:p-8 shadow-lg border border-gray-200 relative",children:[e.jsx("button",{onClick:M,className:"absolute left-3 top-3 sm:left-4 sm:top-4 h-8 w-8 sm:h-9 sm:w-9 flex items-center justify-center rounded-full border border-gray-300 bg-white text-[var(--app-dark-blue)] hover:bg-blue-50 shadow-sm","aria-label":"Previous month",children:e.jsx(A,{className:"text-base sm:text-lg"})}),e.jsx("button",{onClick:S,className:"absolute right-3 top-3 sm:right-4 sm:top-4 h-8 w-8 sm:h-9 sm:w-9 flex items-center justify-center rounded-full border border-gray-300 bg-white text-[var(--app-dark-blue)] hover:bg-blue-50 shadow-sm","aria-label":"Next month",children:e.jsx(F,{className:"text-base sm:text-lg"})}),e.jsx("div",{className:"mb-4 flex items-center justify-center",children:e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-[var(--app-dark-blue)] text-center",children:k})}),b&&e.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg p-3",children:b}),v?e.jsx("div",{className:"flex justify-center items-center py-10",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[var(--app-dark-blue)]"})}):e.jsxs("div",{className:"w-full max-w-xl mx-auto",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-xs sm:text-sm font-semibold text-center text-gray-600",children:C.map(s=>e.jsx("div",{children:s},s))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 text-xs sm:text-sm",children:[Array.from({length:f.getDay()}).map((s,t)=>e.jsx("div",{className:"h-10 sm:h-12"},`empty-${t}`)),Array.from({length:w}).map((s,t)=>{const o=t+1,c=D(o),m=o===n.getDate()&&a===n.getMonth()&&r===n.getFullYear(),y=c==="P",d=new Date(r,a,o)>n;return e.jsxs("div",{className:`h-10 sm:h-12 flex flex-col items-center justify-center rounded-lg border text-xs sm:text-sm
                        ${d?"bg-white border-gray-200 text-gray-500":y?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-300 text-red-600"}
                        ${m?"ring-2 ring-[var(--app-dark-blue)]":""}`,children:[e.jsx("span",{className:"font-semibold",children:o}),c&&e.jsx("span",{className:"text-[11px] sm:text-xs font-bold",children:c})]},o)})]})]}),e.jsx("p",{className:"mt-4 text-[11px] sm:text-xs text-gray-500 text-center",children:"P = Present, A = Absent (no attendance marked)"})]})}),e.jsx(P,{})]})};export{L as default};
