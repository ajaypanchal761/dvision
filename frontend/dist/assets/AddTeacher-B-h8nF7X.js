import{u as g,r as c,j as e}from"./index-BPKQ2keO.js";import{t as f}from"./api-BdrZRD_7.js";const y=()=>{const n=g(),[s,i]=c.useState({image:null,imagePreview:null,name:"",email:"",mobile:"",status:"Active",subjects:["",""]}),[r,m]=c.useState(!1),[x,o]=c.useState(""),b=t=>{const a=t.target.files[0];if(a){const l=new FileReader;l.onloadend=()=>{i({...s,image:a,imagePreview:l.result})},l.readAsDataURL(a)}},h=async t=>{t.preventDefault(),o(""),m(!0);try{const a=s.subjects.filter(d=>d&&d.trim().length>0).map(d=>d.trim());if(a.length>2){o("Maximum 2 subjects can be assigned to a teacher"),m(!1);return}const l={name:s.name,phone:s.mobile,email:s.email||void 0,isActive:s.status==="Active",subjects:a,classes:[],boards:[]};s.imagePreview&&(l.profileImageBase64=s.imagePreview);const u=await f.create(l);u.success?n("/admin/teachers"):o(u.message||"Failed to create teacher")}catch(a){o(a.message||"Failed to create teacher. Please try again."),console.error("Error creating teacher:",a)}finally{m(!1)}},p=t=>t?t.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2):"TE";return e.jsx("div",{className:"min-h-screen bg-white",children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pt-2 sm:pt-3",children:[e.jsx("div",{className:"pb-1 sm:pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n("/admin/teachers"),className:"p-1 text-[#1e3a5f] hover:text-[#2a4a6f] transition-all duration-200 flex items-center justify-center",title:"Back",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsx("h1",{className:"text-sm sm:text-base md:text-lg font-bold text-[#1e3a5f]",children:"Add New Teacher"})]})}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-lg text-xs sm:text-sm mt-2",children:x}),e.jsx("div",{className:"mt-2 sm:mt-3",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-3 sm:p-4 md:p-5",children:e.jsxs("form",{onSubmit:h,className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center py-2 sm:py-3",children:e.jsxs("div",{className:"relative",children:[s.imagePreview?e.jsx("img",{src:s.imagePreview,alt:"Preview",className:"h-24 w-24 sm:h-28 sm:w-28 md:h-32 md:w-32 lg:h-36 lg:w-36 rounded-full object-cover border-4 border-[#1e3a5f] shadow-lg"}):e.jsx("div",{className:"h-24 w-24 sm:h-28 sm:w-28 md:h-32 md:w-32 lg:h-36 lg:w-36 rounded-full bg-gradient-to-br from-[#1e3a5f] to-[#2a4a6f] flex items-center justify-center border-4 border-[#1e3a5f] shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-xl sm:text-2xl md:text-3xl",children:p(s.name)})}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-gradient-to-r from-[#1e3a5f] to-[#2a4a6f] hover:from-[#2a4a6f] hover:to-[#1e3a5f] text-white rounded-full p-2 sm:p-3 md:p-4 cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-110",children:[e.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",disabled:r})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:s.name,onChange:t=>i({...s,name:t.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 md:py-3 border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 text-sm sm:text-base",placeholder:"Enter full name",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"Email"}),e.jsx("input",{type:"email",value:s.email,onChange:t=>i({...s,email:t.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 md:py-3 border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 text-sm sm:text-base",placeholder:"Enter email address",disabled:r})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Mobile ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",required:!0,value:s.mobile,onChange:t=>i({...s,mobile:t.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 md:py-3 border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 text-sm sm:text-base",placeholder:"Enter mobile number",disabled:r})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:s.status,onChange:t=>i({...s,status:t.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 md:py-3 border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-dvision-blue focus:border-dvision-blue outline-none transition-all duration-200 bg-white text-sm sm:text-base",disabled:r,children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"border-t-2 border-gray-100 pt-3 sm:pt-4",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-2 sm:mb-3",children:["Assigned Subjects ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(Maximum 2 - Enter subject names)"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[0,1].map(t=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-600 mb-1.5 sm:mb-2",children:["Subject ",t+1," ",t===0&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.subjects[t]||"",onChange:a=>{const l=[...s.subjects];l[t]=a.target.value,i({...s,subjects:l})},className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 md:py-3 border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 text-sm sm:text-base",placeholder:`Enter subject ${t+1} name`,disabled:r,required:t===0,maxLength:100})]},t))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Enter subject names directly. These are independent of the Subjects module."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 sm:gap-3 pt-3 sm:pt-4 border-t-2 border-gray-100",children:[e.jsx("button",{type:"button",onClick:()=>n("/admin/teachers"),disabled:r,className:"w-full sm:w-auto px-4 sm:px-6 md:px-8 py-2 sm:py-2.5 md:py-3 border-2 border-gray-300 text-gray-700 rounded-lg sm:rounded-xl font-semibold text-sm sm:text-base hover:bg-gray-50 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"w-full sm:w-auto px-4 sm:px-6 md:px-8 py-2 sm:py-2.5 md:py-3 bg-gradient-to-r from-[#1e3a5f] to-[#2a4a6f] hover:from-[#2a4a6f] hover:to-[#1e3a5f] text-white rounded-lg sm:rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:r?"Creating...":"Add Teacher"})]})]})})})]})})};export{y as default};
