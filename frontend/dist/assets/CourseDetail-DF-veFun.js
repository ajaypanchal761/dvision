import{u as k,q as T,r as l,j as e}from"./index-BPKQ2keO.js";import{h as C}from"./api-BdrZRD_7.js";const S=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],L=()=>{const b=k(),{classId:i}=T(),[d,y]=l.useState([]),[m,f]=l.useState(null),[j,c]=l.useState(!0),[x,o]=l.useState(""),p=l.useCallback(async()=>{try{c(!0),o("");const s=await C.getAll({classId:i});if(s.success&&s.data?.timetables){const t=s.data.timetables;y(t),t.length>0&&t[0].classId&&f(t[0].classId)}else o("Failed to load timetables")}catch(s){o(s.message||"Failed to load timetables"),console.error("Error fetching timetables:",s)}finally{c(!1)}},[i]);l.useEffect(()=>{p()},[p]);const h=s=>{if(!s)return"N/A";const[t,r]=s.split(":"),a=parseInt(t),n=a>=12?"PM":"AM";return`${a%12||12}:${r} ${n}`},N=s=>s?s.type==="preparation"?s.name:`Class ${s.class} - ${s.board}`:"N/A",u=d.reduce((s,t)=>{const r=t.dayOfWeek;return s[r]||(s[r]=[]),s[r].push(t),s},{}),w=S.filter(s=>u[s]);return e.jsx("div",{className:"min-h-screen bg-white",children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pt-3 sm:pt-4 md:pt-5 lg:pt-6",children:[e.jsx("div",{className:"pb-0",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>b("/admin/timetable"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Back",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-gray-900",children:m?N(m):"Course Timetable"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:[d.length," ",d.length===1?"class":"classes"," scheduled"]})]})]})})}),x&&e.jsx("div",{className:"mt-3 sm:mt-4 bg-red-50 border border-red-200 text-red-700 px-3 sm:px-4 py-2 sm:py-3 rounded-lg sm:rounded-xl text-xs sm:text-sm",children:x}),e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl md:rounded-2xl shadow-lg border border-gray-300 overflow-hidden mt-3 sm:mt-4 md:mt-5 lg:mt-6",children:e.jsx("div",{className:"overflow-x-auto",children:j?e.jsxs("div",{className:"p-8 sm:p-12 md:p-16 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 border-b-2 border-[#1e3a5f]"}),e.jsx("p",{className:"mt-3 sm:mt-4 text-gray-500 text-sm sm:text-base",children:"Loading timetables..."})]}):d.length===0?e.jsxs("div",{className:"p-8 sm:p-12 md:p-16 text-center",children:[e.jsx("div",{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-2 sm:mb-3",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-gray-500 font-medium text-xs sm:text-sm",children:"No timetables found for this course."})]}):e.jsxs("table",{className:"min-w-full border-collapse border-2 border-gray-400",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-4 py-3 border-2 border-gray-400 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Day"}),e.jsx("th",{className:"px-3 sm:px-4 py-3 border-2 border-gray-400 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-3 sm:px-4 py-3 border-2 border-gray-400 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),e.jsx("th",{className:"px-3 sm:px-4 py-3 border-2 border-gray-400 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Time"})]})}),e.jsx("tbody",{className:"bg-white",children:w.map((s,t)=>{const r=u[s];return r.map((a,n)=>{const g=n===0,v=t===0;return e.jsxs("tr",{className:`hover:bg-gray-50 ${g&&!v?"border-t-2 border-gray-400":""}`,children:[n===0&&e.jsx("td",{rowSpan:r.length,className:"px-3 sm:px-4 py-3 border-2 border-gray-400 align-middle text-center",children:e.jsx("span",{className:"px-2 py-1 inline-flex text-xs font-medium rounded-lg bg-blue-50 text-[#1e3a5f]",children:s})}),e.jsx("td",{className:"px-3 sm:px-4 py-3 border-2 border-gray-400 whitespace-nowrap",children:e.jsx("div",{className:"text-xs sm:text-sm text-gray-900 font-medium",children:a.subjectId?.name||"N/A"})}),e.jsx("td",{className:"px-3 sm:px-4 py-3 border-2 border-gray-400 whitespace-nowrap",children:e.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:a.teacherId?.name||"N/A"})}),e.jsx("td",{className:"px-3 sm:px-4 py-3 border-2 border-gray-400 whitespace-nowrap",children:e.jsxs("div",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:[h(a.startTime)," - ",h(a.endTime)]})})]},a._id)})})})]})})})]})})};export{L as default};
