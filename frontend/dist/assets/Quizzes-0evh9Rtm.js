import{u as B,r as a,j as e,c as O,a2 as V,k as h,a5 as z,a6 as v,m as S,S as U,af as q,a9 as G,y as F,a0 as H,a1 as J}from"./index-BPKQ2keO.js";import{q as j}from"./api-CVReUq8b.js";import{B as K}from"./BottomNav-BGePCkyK.js";const Z=()=>{const m=B(),[x,D]=a.useState([]),[i,N]=a.useState(!0),[A,b]=a.useState(!1),[$,u]=a.useState(null),[n,Q]=a.useState(""),[d,g]=a.useState("all"),[w,E]=a.useState({total:0,active:0,completed:0,inactive:0}),[r,l]=a.useState(1),[c,I]=a.useState(1),[k,P]=a.useState(0),[f]=a.useState(10);a.useEffect(()=>{C()},[r,d,n]),a.useEffect(()=>{T()},[]);const C=async()=>{try{N(!0);const s={page:r,limit:f,search:n,status:d!=="all"?d:void 0},t=await j.getAll(s);t.success&&(D(t.data.quizzes||[]),I(t.pages||1),P(t.total||0),t.pages<r&&t.pages>0&&l(t.pages))}catch(s){console.error("Error fetching quizzes:",s),n||alert("Failed to load quizzes. Please try again.")}finally{N(!1)}},T=async()=>{try{const s=await j.getStatistics();s.success&&s.data?.statistics&&E(s.data.statistics)}catch(s){console.error("Error fetching quiz statistics:",s)}},M=s=>{u(s),b(!0)},_=async()=>{try{(await j.delete($)).success&&(alert("Quiz deleted successfully!"),C(),b(!1),u(null))}catch(s){console.error("Error deleting quiz:",s),alert(s.message||"Failed to delete quiz. Please try again.")}},L=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):null,o=s=>{if(!s)return!1;const t=new Date,R=new Date(s);return t>=R},y=x,p=w.total>0?w:{total:x.length,active:x.filter(s=>s.isActive&&!o(s.deadline)).length,completed:x.filter(s=>o(s.deadline)).length,inactive:x.filter(s=>!s.isActive&&!o(s.deadline)).length};return e.jsxs("div",{className:"min-h-screen bg-white pb-20 sm:pb-24",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-[var(--app-dark-blue)] text-white relative animate-fade-in",style:{borderRadius:"0 0 50% 50% / 0 0 30px 30px"},children:e.jsx("div",{className:"px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6 pb-4 sm:pb-6 md:pb-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("button",{onClick:()=>m("/teacher/dashboard"),className:"p-1.5 sm:p-2 hover:bg-white/10 rounded-full transition-colors hover:scale-110",children:e.jsx(O,{className:"text-white text-lg sm:text-xl md:text-2xl"})}),e.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold animate-slide-in-left",children:"My Quizzes"})]}),e.jsxs("button",{onClick:()=>m("/teacher/quizzes/add"),className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 hover:bg-white/30 text-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg sm:rounded-xl transition-all shadow-lg hover:shadow-xl backdrop-blur-md border border-white/10",children:[e.jsx(V,{className:"text-base sm:text-lg font-bold"}),e.jsx("span",{className:"text-xs sm:text-sm font-bold hidden sm:inline",children:"Create"})]})]})})}),e.jsx("div",{className:"px-3 sm:px-4 md:px-6 pt-4 sm:pt-5 md:pt-6 mb-3 sm:mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{className:"group bg-gradient-to-br from-white to-indigo-50 rounded-lg sm:rounded-xl shadow-lg hover:shadow-xl p-3 sm:p-4 border border-gray-200 hover:border-indigo-300 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"Total"}),e.jsx(h,{className:"text-indigo-600 text-base sm:text-lg group-hover:scale-110 transition-transform"})]}),e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-extrabold text-indigo-600",children:i?"...":p.total})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-white to-green-50 rounded-lg sm:rounded-xl shadow-lg hover:shadow-xl p-3 sm:p-4 border border-gray-200 hover:border-green-300 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"Active"}),e.jsx(z,{className:"text-green-600 text-base sm:text-lg group-hover:scale-110 transition-transform"})]}),e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-extrabold text-green-600",children:i?"...":p.active})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-white to-blue-50 rounded-lg sm:rounded-xl shadow-lg hover:shadow-xl p-3 sm:p-4 border border-gray-200 hover:border-blue-300 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"Completed"}),e.jsx(v,{className:"text-blue-600 text-base sm:text-lg group-hover:scale-110 transition-transform"})]}),e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-extrabold text-blue-600",children:i?"...":p.completed})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-white to-gray-50 rounded-lg sm:rounded-xl shadow-lg hover:shadow-xl p-3 sm:p-4 border border-gray-200 hover:border-gray-300 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:"Inactive"}),e.jsx(S,{className:"text-gray-600 text-base sm:text-lg group-hover:scale-110 transition-transform"})]}),e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-extrabold text-gray-600",children:i?"...":p.inactive})]})]})}),e.jsx("div",{className:"px-3 sm:px-4 md:px-6 mb-3 sm:mb-4 animate-slide-in-up",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 overflow-x-auto pb-2",children:[e.jsx("button",{onClick:()=>{g("all"),l(1)},className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm whitespace-nowrap transition-all duration-300 hover:scale-105 ${d==="all"?"bg-gradient-to-r from-[var(--app-dark-blue)] to-blue-700 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-200 hover:border-[var(--app-dark-blue)]/30"}`,children:"All"}),e.jsx("button",{onClick:()=>{g("active"),l(1)},className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm whitespace-nowrap transition-all duration-300 ${d==="active"?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-200 hover:border-green-300"}`,children:"Active"}),e.jsx("button",{onClick:()=>{g("completed"),l(1)},className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm whitespace-nowrap transition-all duration-300 ${d==="completed"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-200 hover:border-blue-300"}`,children:"Completed"}),e.jsx("button",{onClick:()=>{g("inactive"),l(1)},className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm whitespace-nowrap transition-all duration-300 ${d==="inactive"?"bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-lg":"bg-white text-gray-700 border-2 border-gray-200 hover:border-gray-300"}`,children:"Inactive"})]})}),e.jsx("div",{className:"px-3 sm:px-4 md:px-6 mb-3 sm:mb-4 animate-fade-in",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:e.jsx(U,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search quizzes by name, subject, board, or class...",value:n,onChange:s=>{Q(s.target.value),l(1)},className:"w-full pl-9 sm:pl-10 md:pl-12 pr-3 sm:pr-4 py-2.5 sm:py-3 text-xs sm:text-sm border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-[var(--app-dark-blue)] focus:border-[var(--app-dark-blue)] outline-none transition-all shadow-sm hover:shadow-md"})]})}),e.jsx("div",{className:"px-3 sm:px-4 md:px-6",children:i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("p",{className:"text-gray-500 text-xs sm:text-sm",children:"Loading quizzes..."})}):y.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 sm:p-10 md:p-12 border-2 border-dashed border-gray-300 text-center",children:[e.jsx(h,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-gray-400 mb-3 sm:mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium text-xs sm:text-sm mb-1",children:n?"No quizzes found matching your search.":"No quizzes found."}),e.jsx("p",{className:"text-gray-400 text-[10px] sm:text-xs",children:n?"Try adjusting your search criteria.":'Click "Create Quiz" to create one.'})]}):e.jsx("div",{className:"space-y-3 sm:space-y-4 md:space-y-5",children:y.map((s,t)=>e.jsx("div",{className:`group relative bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 border border-[var(--app-dark-blue)]/60 hover:border-[var(--app-dark-blue)] transition-all duration-300 transform hover:-translate-y-0.5 shadow-sm hover:shadow-md shadow-gray-200/50 ${t%2===0?"animate-slide-in-left":"animate-slide-in-right"}`,style:{animationDelay:`${t*.15}s`},children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-bold text-gray-900 mb-1.5 sm:mb-2 group-hover:text-[var(--app-dark-blue)] transition-colors leading-tight",children:s.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx(h,{className:"w-3 h-3 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:s.subjectId?.name||"N/A"})]}),e.jsx("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("span",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:["Class ",s.classNumber]})}),e.jsx("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:s.board})}),s.questions&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx(h,{className:"w-3 h-3 text-gray-600 flex-shrink-0"}),e.jsxs("span",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:[s.questions.length," Q"]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[s.deadline&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx(S,{className:"w-3 h-3 text-gray-600"}),e.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:L(s.deadline)})]}),e.jsx("div",{children:o(s.deadline)?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(v,{className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-blue-700",children:"Completed"})]}):e.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-lg border ${s.isActive?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[e.jsx(z,{className:`w-3 h-3 ${s.isActive?"text-green-600":"text-gray-600"}`}),e.jsx("span",{className:`text-[10px] sm:text-xs font-medium ${s.isActive?"text-green-700":"text-gray-700"}`,children:s.isActive?"Active":"Inactive"})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>m(`/teacher/quizzes/${s._id}`),className:"p-1.5 sm:p-2 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-all",title:"View Details",children:e.jsx(q,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),!o(s.deadline)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(`/teacher/quizzes/edit/${s._id}`),className:"p-1.5 sm:p-2 bg-[var(--app-dark-blue)]/10 hover:bg-[var(--app-dark-blue)]/20 text-[var(--app-dark-blue)] rounded-lg transition-all",title:"Edit",children:e.jsx(G,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx("button",{onClick:()=>M(s._id),className:"p-1.5 sm:p-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-all",title:"Delete",children:e.jsx(F,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),o(s.deadline)&&e.jsx("button",{onClick:()=>m(`/teacher/quizzes/${s._id}/results`),className:"p-1.5 sm:p-2 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-all",title:"View Results",children:e.jsx(v,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]})},s._id))})}),!i&&y.length>0&&e.jsx("div",{className:"px-3 sm:px-4 md:px-6 mt-4 sm:mt-6 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"text-sm text-gray-500 font-medium",children:["Showing ",e.jsx("span",{className:"font-bold text-gray-900",children:(r-1)*f+1})," to ",e.jsx("span",{className:"font-bold text-gray-900",children:Math.min(r*f,k)})," of ",e.jsx("span",{className:"font-bold text-gray-900",children:k})," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>l(s=>Math.max(1,s-1)),disabled:r===1,className:`p-2 rounded-lg border flex items-center gap-1 transition-all ${r===1?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-[var(--app-dark-blue)] hover:text-white hover:border-[var(--app-dark-blue)]"}`,children:[e.jsx(H,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center gap-1 px-2",children:[[...Array(c)].map((s,t)=>{}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 bg-gray-50 px-3 py-1 rounded-md border border-gray-200",children:["Page ",r," of ",c]})]}),e.jsxs("button",{onClick:()=>l(s=>Math.min(c,s+1)),disabled:r===c,className:`p-2 rounded-lg border flex items-center gap-1 transition-all ${r===c?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-[var(--app-dark-blue)] hover:text-white hover:border-[var(--app-dark-blue)]"}`,children:[e.jsx("span",{className:"hidden sm:inline font-medium",children:"Next"}),e.jsx(J,{className:"w-5 h-5"})]})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 mx-auto bg-red-100 rounded-xl sm:rounded-2xl mb-4 sm:mb-6",children:e.jsx(F,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),e.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 text-center mb-2",children:"Delete Quiz"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 text-center mb-6 sm:mb-8",children:"Are you sure you want to delete this quiz? This action cannot be undone."}),e.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[e.jsx("button",{onClick:()=>{b(!1),u(null)},className:"px-4 sm:px-6 py-2 sm:py-2.5 border-2 border-gray-300 text-gray-700 rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm hover:bg-gray-50 transition-all",children:"Cancel"}),e.jsx("button",{onClick:_,className:"px-4 sm:px-6 py-2 sm:py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm transition-all shadow-lg hover:shadow-xl",children:"Delete"})]})]})})}),e.jsx(K,{})]})};export{Z as default};
