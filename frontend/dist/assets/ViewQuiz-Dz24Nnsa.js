import{u as v,q as z,r as l,j as e,c as q,k,m as C,a6 as D,aK as Q,F,y as A}from"./index-BPKQ2keO.js";import{q as o}from"./api-CVReUq8b.js";import{B as S}from"./BottomNav-BGePCkyK.js";const L=()=>{const r=v(),{id:n}=z(),[t,h]=l.useState(null),[u,x]=l.useState(!0),[p,d]=l.useState(!1),[g,b]=l.useState({});l.useEffect(()=>{f()},[n]);const f=async()=>{try{x(!0);const s=await o.getById(n);s.success&&s.data?.quiz?h(s.data.quiz):(alert("Quiz not found"),r("/teacher/quizzes"))}catch(s){console.error("Error fetching quiz:",s),alert("Failed to load quiz. Please try again."),r("/teacher/quizzes")}finally{x(!1)}},j=async()=>{try{(await o.delete(n)).success&&(alert("Quiz deleted successfully!"),r("/teacher/quizzes"))}catch(s){console.error("Error deleting quiz:",s),alert(s.message||"Failed to delete quiz. Please try again.")}finally{d(!1)}},y=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):null,m=()=>{if(!t?.deadline)return!1;const s=new Date,a=new Date(t.deadline);return s>=a},N=s=>{b(a=>({...a,[s]:!a[s]}))};return u?e.jsx("div",{className:"min-h-screen bg-white pb-20 sm:pb-24 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500 text-xs sm:text-sm",children:"Loading quiz..."})}):t?e.jsxs("div",{className:"min-h-screen bg-white pb-20 sm:pb-24",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-[var(--app-dark-blue)] text-white relative",style:{borderRadius:"0 0 50% 50% / 0 0 30px 30px"},children:e.jsx("div",{className:"px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6 pb-4 sm:pb-6 md:pb-8",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("button",{onClick:()=>r("/teacher/quizzes"),className:"p-1.5 sm:p-2 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(q,{className:"text-white text-lg sm:text-xl md:text-2xl"})}),e.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold",children:"Quiz Details"})]})})}),e.jsxs("div",{className:"px-3 sm:px-4 md:px-6 pt-4 sm:pt-5 md:pt-6",children:[e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-md p-3 sm:p-4 md:p-5 border-2 border-gray-200 mb-4",children:[e.jsx("h2",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4",children:t.name}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Subject:"})," ",t.subjectId?.name||"N/A"]})]}),e.jsx("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:e.jsxs("span",{children:[e.jsx("strong",{children:"Class:"})," ",t.classNumber]})}),e.jsx("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:e.jsxs("span",{children:[e.jsx("strong",{children:"Board:"})," ",t.board]})}),e.jsx("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:e.jsxs("span",{children:[e.jsx("strong",{children:"Status:"}),m()?e.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-[10px] sm:text-xs font-semibold bg-blue-100 text-blue-700",children:"Completed"}):e.jsx("span",{className:`ml-1 px-2 py-0.5 rounded-full text-[10px] sm:text-xs font-semibold ${t.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.isActive?"Active":"Inactive"})]})}),t.deadline&&e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Deadline:"})," ",y(t.deadline)]})]}),e.jsx("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:e.jsxs("span",{children:[e.jsx("strong",{children:"Questions:"})," ",t.questions?.length||0]})})]}),m()&&e.jsxs("button",{onClick:()=>r(`/teacher/quizzes/${n}/results`),className:"w-full sm:w-auto px-4 sm:px-5 py-2.5 sm:py-3 bg-[var(--app-dark-blue)] hover:bg-blue-800 text-white rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-xl",children:[e.jsx(D,{className:"text-base sm:text-lg"}),e.jsx("span",{children:"View Results"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("h3",{className:"text-sm sm:text-base md:text-lg font-bold text-gray-900",children:["Questions (",t.questions?.length||0,")"]}),t.questions&&t.questions.length>0?t.questions.map((s,a)=>{const c=g[a];return e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-md border-2 border-gray-200 overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>N(a),className:"w-full flex items-center justify-between p-3 sm:p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 text-left",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-[var(--app-dark-blue)] text-white rounded-full flex items-center justify-center flex-shrink-0 text-xs sm:text-sm font-bold",children:a+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-1",children:["Question ",a+1]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 line-clamp-2",children:s.question||"No question text"})]})]}),e.jsx("div",{className:"flex-shrink-0 ml-2",children:c?e.jsx(Q,{className:"w-5 h-5 text-gray-600"}):e.jsx(F,{className:"w-5 h-5 text-gray-600"})})]}),c&&e.jsx("div",{className:"p-3 sm:p-4 md:p-5 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"mb-3 sm:mb-4",children:[e.jsx("p",{className:"text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-2 sm:mb-3",children:s.question}),e.jsx("div",{className:"space-y-2",children:s.options?.map((w,i)=>e.jsxs("div",{className:`flex items-center gap-2 p-2 sm:p-2.5 rounded-lg ${i===s.correctAnswer?"bg-green-50 border-2 border-green-300":"bg-gray-50 border-2 border-gray-200"}`,children:[e.jsx("span",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-[var(--app-dark-blue)] text-white rounded-full flex items-center justify-center text-[10px] sm:text-xs font-bold flex-shrink-0",children:String.fromCharCode(65+i)}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-700 flex-1",children:w}),i===s.correctAnswer&&e.jsx("span",{className:"text-[10px] sm:text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded-full",children:"Correct"})]},i))})]})})]},a)}):e.jsx("div",{className:"bg-gray-50 rounded-xl p-6 sm:p-8 text-center",children:e.jsx("p",{className:"text-gray-500 text-xs sm:text-sm",children:"No questions found"})})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 mx-auto bg-red-100 rounded-xl sm:rounded-2xl mb-4 sm:mb-6",children:e.jsx(A,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),e.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 text-center mb-2",children:"Delete Quiz"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 text-center mb-6 sm:mb-8",children:"Are you sure you want to delete this quiz? This action cannot be undone."}),e.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 sm:px-6 py-2 sm:py-2.5 border-2 border-gray-300 text-gray-700 rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm hover:bg-gray-50 transition-all",children:"Cancel"}),e.jsx("button",{onClick:j,className:"px-4 sm:px-6 py-2 sm:py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm transition-all shadow-lg hover:shadow-xl",children:"Delete"})]})]})})}),e.jsx(S,{})]}):null};export{L as default};
