import{u as T,r as l,ay as c,j as e,F as C}from"./index-BPKQ2keO.js";import{I as S}from"./Image-B_ouKXn_.js";import{a as w,t as y}from"./api-CVReUq8b.js";const P=()=>{const d=T(),[n,u]=l.useState(""),[h,i]=l.useState(!1),[b,a]=l.useState(""),[x,j]=l.useState("+91"),[g,p]=l.useState(!1),[o,N]=l.useState("teacher"),[f,v]=l.useState(!1),L=[{code:"+91",country:"India",countryCode:"IN",flag:"ðŸ‡®ðŸ‡³"},{code:"+1",country:"USA",countryCode:"US",flag:"ðŸ‡ºðŸ‡¸"},{code:"+44",country:"UK",countryCode:"GB",flag:"ðŸ‡¬ðŸ‡§"},{code:"+61",country:"Australia",countryCode:"AU",flag:"ðŸ‡¦ðŸ‡º"},{code:"+971",country:"UAE",countryCode:"AE",flag:"ðŸ‡¦ðŸ‡ª"}];l.useEffect(()=>{u("");const t=document.getElementById("mobile-number-login");t&&(t.value="")},[]),l.useEffect(()=>{if(localStorage.getItem("dvision_agent_token")){d(c.AGENT_DASHBOARD,{replace:!0});return}localStorage.getItem("dvision_teacher_token")&&d(c.DASHBOARD,{replace:!0})},[d]);const k=async t=>{if(t.preventDefault(),a(""),!n||n.length<10){a("Please enter a valid mobile number");return}i(!0);try{const s=`${x}${n}`;if(o==="agent"){const r=await w.checkAgentExists(s);if(!r.exists){a(r.message||"Agent account not found. Contact admin to create your account."),i(!1);return}if(!r.isActive){a("Your agent account has been deactivated. Please contact admin."),i(!1);return}const m=await w.sendOTP(s);m.success?(sessionStorage.setItem("login_phone",s),sessionStorage.setItem("login_mode","agent"),d(c.FINAL_OTP)):a(m.message||"Failed to send OTP. Please try again.")}else{const r=await y.checkTeacherExists(s);if(!r.exists){a(r.message||"Teacher account not found. Please contact admin to get your account created. Signup is not available."),i(!1);return}const m=await y.sendOTP(s);m.success?(sessionStorage.setItem("login_phone",s),sessionStorage.setItem("login_mode","teacher"),d(c.FINAL_OTP)):a(m.message||"Failed to send OTP. Please try again.")}}catch(s){a(s.message||`Failed to verify ${o}. Please try again.`)}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen w-full bg-white flex flex-col",children:[e.jsxs("div",{className:"bg-[var(--app-dark-blue)] text-white h-24 sm:h-28 md:h-32 relative overflow-hidden",style:{borderBottomRightRadius:"300px"},children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-12 sm:h-14 md:h-16 overflow-hidden",children:e.jsxs("svg",{className:"absolute bottom-0 w-full h-full",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0,60 Q300,20 600,60 T1200,60 L1200,120 L0,120 Z",fill:"rgba(255,255,255,0.1)",children:e.jsx("animate",{attributeName:"d",values:"M0,60 Q300,20 600,60 T1200,60 L1200,120 L0,120 Z;M0,60 Q300,40 600,60 T1200,60 L1200,120 L0,120 Z;M0,60 Q300,20 600,60 T1200,60 L1200,120 L0,120 Z",dur:"3s",repeatCount:"indefinite"})}),e.jsx("path",{d:"M0,80 Q300,40 600,80 T1200,80 L1200,120 L0,120 Z",fill:"rgba(255,255,255,0.05)",children:e.jsx("animate",{attributeName:"d",values:"M0,80 Q300,40 600,80 T1200,80 L1200,120 L0,120 Z;M0,80 Q300,60 600,80 T1200,80 L1200,120 L0,120 Z;M0,80 Q300,40 600,80 T1200,80 L1200,120 L0,120 Z",dur:"4s",repeatCount:"indefinite"})})]})}),e.jsx("div",{className:"absolute top-3 right-6 w-16 h-16 sm:w-20 sm:h-20 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute top-8 right-16 w-12 h-12 sm:w-16 sm:h-16 bg-white/5 rounded-full blur-lg"}),e.jsx("div",{className:"absolute bottom-6 left-10 w-20 h-20 sm:w-24 sm:h-24 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"pt-5 sm:pt-6 md:pt-8 px-4 sm:px-6 md:px-8 relative z-10",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-white/90 mb-0.5 sm:mb-1",children:"Welcome back!"}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-white",children:o==="agent"?"Agent Sign In":"Sign In"})]})})]}),e.jsxs("div",{className:"flex-1 px-4 sm:px-6 md:px-8 py-4 sm:py-6 md:py-8 flex items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-48 h-48 sm:w-64 sm:h-64 bg-[var(--app-dark-blue)]/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-60 h-60 sm:w-80 sm:h-80 bg-[var(--app-teal)]/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-72 h-72 sm:w-96 sm:h-96 bg-[var(--app-dark-blue)]/3 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsx("div",{className:"mb-4 sm:mb-5 md:mb-6 flex justify-center",children:e.jsx(S,{src:"/dvisionteacher.png",alt:"D'Vision Academy Logo",className:"h-28 sm:h-32 md:h-36 lg:h-40 w-auto object-contain"})}),e.jsxs("form",{onSubmit:k,autoComplete:"off",noValidate:!0,className:"space-y-4 sm:space-y-5 md:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm sm:text-base md:text-lg font-medium text-[var(--app-black)] mb-2 sm:mb-3",children:"Mobile Number"}),e.jsxs("div",{className:`relative flex items-stretch rounded-lg sm:rounded-xl border transition-all ${f?"border-[var(--app-dark-blue)] ring-2 ring-[var(--app-dark-blue)]/20":"border-gray-300"}`,children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs("button",{type:"button",onClick:()=>p(!g),className:`flex items-center justify-center gap-1 sm:gap-1.5 px-3 sm:px-4 md:px-5 h-full rounded-l-lg sm:rounded-l-xl bg-gray-50 hover:bg-gray-100 transition-colors min-h-[48px] sm:min-h-[52px] md:min-h-[56px] w-auto ${f?"border-0":"border-r border-gray-300"}`,children:[e.jsx("span",{className:"text-[var(--app-black)]/70 font-medium text-sm sm:text-base md:text-lg whitespace-nowrap",children:x}),e.jsx(C,{className:"text-[var(--app-black)]/50 text-sm sm:text-base md:text-lg flex-shrink-0"})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-300 rounded-lg sm:rounded-xl shadow-2xl z-20 max-h-60 overflow-y-auto w-44 sm:w-48 md:w-56",children:L.map(t=>e.jsxs("button",{type:"button",onClick:()=>{j(t.code),p(!1)},className:`w-full flex items-center gap-2 md:gap-3 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-3 hover:bg-gray-50 transition-colors ${x===t.code?"bg-[var(--app-dark-blue)]/10":""}`,children:[e.jsx("span",{className:"text-[var(--app-black)] font-bold text-xs sm:text-xs md:text-sm w-5 sm:w-6 md:w-8",children:t.countryCode}),e.jsx("span",{className:"text-[var(--app-black)] font-medium text-xs sm:text-xs md:text-sm",children:t.code}),e.jsx("span",{className:"text-[var(--app-black)]/60 text-[10px] sm:text-[10px] md:text-xs ml-auto",children:t.country})]},t.code))})]})]}),e.jsx("input",{type:"tel",name:"mobile-number-login",id:"mobile-number-login",placeholder:"Enter your mobile number",value:n,onChange:t=>{const s=t.target.value.replace(/\D/g,"").slice(0,15);u(s)},onFocus:()=>v(!0),onBlur:()=>v(!1),autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:"false",inputMode:"numeric",className:"flex-1 pl-3 sm:pl-4 md:pl-5 pr-3 sm:pr-4 md:pr-5 py-3 sm:py-3.5 md:py-4 rounded-r-lg sm:rounded-r-xl border-0 bg-gray-50 focus:outline-none focus:bg-white transition-all text-sm sm:text-base md:text-lg text-[var(--app-black)] placeholder:text-gray-400 h-full min-h-[48px] sm:min-h-[52px] md:min-h-[56px]",required:!0})]})]}),b&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-3 rounded-lg sm:rounded-xl text-xs sm:text-sm",children:b}),e.jsx("button",{type:"submit",className:"w-full bg-[var(--app-dark-blue)] text-white py-3 sm:py-4 md:py-4.5 rounded-lg sm:rounded-xl font-bold text-sm sm:text-base md:text-lg hover:opacity-90 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:h||!n||n.length<10,children:h?"Sending OTP...":o==="agent"?"Agent Sign In":"Sign In"})]}),e.jsx("div",{className:"mt-4 sm:mt-5 md:mt-6 text-center",children:e.jsx("button",{type:"button",onClick:()=>{N(o==="teacher"?"agent":"teacher"),a(""),u("")},className:"text-sm sm:text-base text-[var(--app-dark-blue)] hover:underline font-medium",children:o==="teacher"?"Login as Agent":"Login as Teacher"})}),e.jsx("div",{className:"mt-4 sm:mt-5 md:mt-6 text-center",children:e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-[var(--app-black)]/80",children:o==="agent"?"Agent accounts are created by admin only. Contact admin if you need an agent account.":"Teacher registration is not available. Only pre-registered teachers can login. Please contact admin to get your account created."})})]})]}),e.jsxs("div",{className:"bg-[var(--app-dark-blue)] h-16 sm:h-20 md:h-24 relative mt-auto overflow-hidden",style:{borderTopLeftRadius:"300px"},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden",children:e.jsxs("svg",{className:"absolute top-0 w-full h-full",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0,40 Q300,80 600,40 T1200,40 L1200,0 L0,0 Z",fill:"rgba(255,255,255,0.1)",children:e.jsx("animate",{attributeName:"d",values:"M0,40 Q300,80 600,40 T1200,40 L1200,0 L0,0 Z;M0,40 Q300,60 600,40 T1200,40 L1200,0 L0,0 Z;M0,40 Q300,80 600,40 T1200,40 L1200,0 L0,0 Z",dur:"3s",repeatCount:"indefinite"})}),e.jsx("path",{d:"M0,20 Q300,60 600,20 T1200,20 L1200,0 L0,0 Z",fill:"rgba(255,255,255,0.05)",children:e.jsx("animate",{attributeName:"d",values:"M0,20 Q300,60 600,20 T1200,20 L1200,0 L0,0 Z;M0,20 Q300,40 600,20 T1200,20 L1200,0 L0,0 Z;M0,20 Q300,60 600,20 T1200,20 L1200,0 L0,0 Z",dur:"4s",repeatCount:"indefinite"})})]})}),e.jsx("div",{className:"absolute bottom-3 left-6 w-16 h-16 sm:w-20 sm:h-20 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-8 left-16 w-12 h-12 sm:w-16 sm:h-16 bg-white/5 rounded-full blur-lg"}),e.jsx("div",{className:"absolute top-6 right-10 w-20 h-20 sm:w-24 sm:h-24 bg-white/10 rounded-full blur-xl"})]})]})};export{P as default};
