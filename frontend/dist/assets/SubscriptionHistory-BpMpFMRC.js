import{u as w,a as D,r as C,j as e,c as S,R as d,m as k}from"./index-BPKQ2keO.js";import{g as A}from"./dummyData-Bw8ec5qs.js";import{B as I}from"./BottomNav-KrGopomG.js";import"./sub5-ll-uW0t5.js";const L=()=>{const a=w(),{user:x,cancelSubscription:m}=D(),o=(x?.subscribedCourses||[]).map(s=>{const t=A(s.courseId);return t?{...t,subscription:s}:null}).filter(Boolean),[r,n]=C.useState(null),c=s=>new Date(s).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),p=s=>{const t=new Date(s),l=t.toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),i=t.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${l}, ${i}`},u=s=>new Date(s)<new Date,b=s=>({"3months":"3 Months","6months":"6 Months","12months":"Full year"})[s]||s,h=(s,t)=>`ADMIN_${Date.parse(t)}`,g=s=>{n(s)},N=()=>{if(r){const s=m(r);s.success?(alert("Subscription cancelled successfully"),n(null)):alert(s.message||"Failed to cancel subscription")}};return e.jsxs("div",{className:"min-h-screen w-full bg-white",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-[var(--app-dark-blue)] text-white relative",style:{borderRadius:"0 0 50% 50% / 0 0 30px 30px"},children:e.jsx("div",{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-6 sm:pb-8",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("button",{onClick:()=>a(d.DASHBOARD),className:"p-2 text-white hover:bg-white/10 rounded-full transition-colors",children:e.jsx(S,{className:"text-xl sm:text-2xl"})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:"Subscription History"})]})})}),e.jsxs("main",{className:"px-4 sm:px-6 py-6 pb-24",children:[o.length>0?e.jsx("div",{className:"space-y-4",children:o.map(s=>{const t=u(s.subscription.expiryDate),l=b(s.subscription.plan),i=c(s.subscription.subscribedAt),f=c(s.subscription.expiryDate),j=p(s.subscription.subscribedAt),y=h(s.id,s.subscription.subscribedAt),v=s.plans?.[s.subscription.plan]?.price||0;return e.jsxs("div",{className:"bg-white rounded-xl p-5 sm:p-6 shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-[var(--app-dark-blue)]",children:l}),e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-sm font-bold ${t?"bg-red-100 text-red-700 border border-red-300":"bg-green-100 text-green-700 border border-green-300"}`,children:t?"Expired":"Active"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Amount: "}),e.jsxs("span",{className:"text-gray-800 font-bold",children:["â‚¹",v.toLocaleString("en-IN"),".00"]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Transaction ID: "}),e.jsx("span",{className:"text-gray-800 font-bold",children:y})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Start Date: "}),e.jsx("span",{className:"text-gray-800 font-bold",children:i})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"End Date: "}),e.jsx("span",{className:`font-bold ${t?"text-red-600":"text-gray-800"}`,children:f})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Purchase Date: "}),e.jsx("span",{className:"text-gray-800 font-bold",children:j})]})]}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:()=>g(s.id),className:"flex-1 bg-red-500 text-white font-bold py-3 rounded-xl hover:bg-red-600 transition-colors shadow-lg",children:"Cancel Subscription"}),e.jsx("button",{onClick:()=>a(`/course/${s.id}`),className:"flex-1 bg-[var(--app-dark-blue)] text-white font-bold py-3 rounded-xl hover:bg-[var(--app-dark-blue)]/90 transition-colors shadow-lg",children:"View Details"})]})]},s.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] bg-gray-50 rounded-xl p-12 border border-gray-200",children:[e.jsx("div",{className:"w-20 h-20 bg-[var(--app-dark-blue)]/10 rounded-full flex items-center justify-center mb-6",children:e.jsx(k,{className:"text-[var(--app-dark-blue)] text-4xl"})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2 text-center",children:"No Subscriptions Yet"}),e.jsx("p",{className:"text-gray-500 text-center max-w-md mb-6 text-sm sm:text-base",children:"You haven't subscribed to any courses yet. Browse our courses and start learning!"}),e.jsx("button",{onClick:()=>a(d.DASHBOARD),className:"bg-[var(--app-dark-blue)] text-white font-bold px-6 py-3 rounded-xl hover:bg-[var(--app-dark-blue)]/90 transition-colors shadow-lg",children:"Browse Courses"})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Cancel Subscription?"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Are you sure you want to cancel this subscription? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>n(null),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-700 font-bold hover:bg-gray-50 transition-colors",children:"No, Keep It"}),e.jsx("button",{onClick:N,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl font-bold hover:bg-red-600 transition-colors",children:"Yes, Cancel"})]})]})})]}),e.jsx(I,{})]})};export{L as default};
