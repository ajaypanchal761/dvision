import{u as I,a as S,r as i,j as e,c as E,R as u,d as j,f as C,Y as R,e as M,i as B,k as O}from"./index-BPKQ2keO.js";import{B as D}from"./BottomNav-KrGopomG.js";const U=()=>{const c=I(),{user:a,updateUser:x}=S(),[r,b]=i.useState({fullName:"",mobileNumber:"",email:"",class:"",board:""}),[p,o]=i.useState(!1),[f,w]=i.useState(null),[g,h]=i.useState(null),[y,m]=i.useState(""),[v,l]=i.useState("");i.useEffect(()=>{a&&(b({fullName:a.name||a.fullName||"",mobileNumber:a.phone||a.mobileNumber||"",email:a.email||"",class:a.class||"",board:a.board||""}),a.profileImage&&h(a.profileImage))},[a]);const N=d=>{b({...r,[d.target.name]:d.target.value})},k=d=>{const s=d.target.files[0];if(s){if(!s.type.startsWith("image/")){l("Please select an image file"),setTimeout(()=>l(""),3e3);return}if(s.size>5*1024*1024){l("Image size should be less than 5MB"),setTimeout(()=>l(""),3e3);return}w(s),l("");const t=new FileReader;t.onloadend=()=>{h(t.result)},t.readAsDataURL(s)}},F=async d=>{d.preventDefault(),o(!0),l(""),m("");try{const s={name:r.fullName,email:r.email};if(f){const t=new FileReader;t.onloadend=async()=>{const P=t.result;s.profileImageBase64=P;try{const n=await x(s);n.success?(o(!1),m("Profile updated successfully!"),setTimeout(()=>{c(u.PROFILE)},1500)):(o(!1),l(n.message||"Failed to update profile. Please try again."))}catch(n){o(!1),l(n.message||"Failed to update profile. Please try again.")}},t.readAsDataURL(f)}else{const t=await x(s);t.success?(o(!1),m("Profile updated successfully!"),setTimeout(()=>{c(u.PROFILE)},1500)):(o(!1),l(t.message||"Failed to update profile. Please try again."))}}catch(s){o(!1),l(s.message||"Failed to update profile. Please try again.")}};return e.jsxs("div",{className:"min-h-screen w-full bg-white pb-20",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-[var(--app-dark-blue)] text-white relative",style:{borderRadius:"0 0 50% 50% / 0 0 30px 30px"},children:e.jsx("div",{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-6 sm:pb-8",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("button",{onClick:()=>c(u.PROFILE),className:"p-2 text-white hover:bg-white/10 rounded-full transition-colors",children:e.jsx(E,{className:"text-xl sm:text-2xl"})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:"Edit Profile"})]})})}),e.jsx("div",{className:"px-4 sm:px-6 mt-6 flex justify-center",children:e.jsx("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-5 sm:p-6 border border-gray-200",children:e.jsxs("form",{onSubmit:F,className:"space-y-5",children:[v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm font-medium",children:v}),e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsxs("div",{className:"relative",children:[g?e.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-full overflow-hidden border-4 border-[var(--app-dark-blue)]",children:e.jsx("img",{src:g,alt:"Profile",className:"w-full h-full object-cover"})}):e.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-full bg-[var(--app-dark-blue)] flex items-center justify-center border-4 border-[var(--app-dark-blue)]",children:e.jsx(j,{className:"text-white text-3xl sm:text-4xl"})}),e.jsxs("label",{htmlFor:"profileImage",className:"absolute -bottom-2 -right-2 w-10 h-10 bg-[var(--app-dark-blue)] rounded-full flex items-center justify-center cursor-pointer hover:bg-[var(--app-dark-blue)]/90 transition-colors shadow-lg border-2 border-white",children:[e.jsx(C,{className:"text-white text-lg"}),e.jsx("input",{type:"file",id:"profileImage",accept:"image/*",onChange:k,className:"hidden"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Click camera icon to change photo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(j,{className:"text-[var(--app-dark-blue)] text-lg"})}),e.jsx("input",{type:"text",name:"fullName",value:r.fullName,onChange:N,className:"w-full pl-12 pr-4 py-3.5 rounded-xl border-2 border-gray-200 bg-white focus:outline-none focus:border-[var(--app-dark-blue)] focus:ring-2 focus:ring-[var(--app-dark-blue)]/20 transition-all text-gray-800 font-medium",placeholder:"Enter your full name",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Mobile Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(R,{className:"text-gray-400 text-lg"})}),e.jsx("input",{type:"tel",name:"mobileNumber",value:r.mobileNumber,readOnly:!0,className:"w-full pl-12 pr-4 py-3.5 rounded-xl border-2 border-gray-200 bg-gray-100 focus:outline-none text-gray-600 font-medium cursor-not-allowed",placeholder:"Mobile number"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mobile number cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(M,{className:"text-[var(--app-dark-blue)] text-lg"})}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:N,className:"w-full pl-12 pr-4 py-3.5 rounded-xl border-2 border-gray-200 bg-white focus:outline-none focus:border-[var(--app-dark-blue)] focus:ring-2 focus:ring-[var(--app-dark-blue)]/20 transition-all text-gray-800 font-medium",placeholder:"Enter your email",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Class"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(B,{className:"text-gray-400 text-lg"})}),e.jsx("input",{type:"text",name:"class",value:r.class,readOnly:!0,className:"w-full pl-12 pr-4 py-3.5 rounded-xl border-2 border-gray-200 bg-gray-100 focus:outline-none text-gray-600 font-medium cursor-not-allowed",placeholder:"Class"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Class cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Board"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(O,{className:"text-gray-400 text-lg"})}),e.jsx("input",{type:"text",name:"board",value:r.board,readOnly:!0,className:"w-full pl-12 pr-4 py-3.5 rounded-xl border-2 border-gray-200 bg-gray-100 focus:outline-none text-gray-600 font-medium cursor-not-allowed",placeholder:"Board"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Board cannot be changed"})]}),e.jsx("button",{type:"submit",disabled:p,className:"w-full bg-[var(--app-dark-blue)] text-white font-bold py-4 rounded-xl hover:bg-[var(--app-dark-blue)]/90 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed mt-6",children:p?"Saving...":"Save Changes"}),y&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm font-medium",children:y})]})})}),e.jsx(D,{showProfile:!0})]})};export{U as default};
