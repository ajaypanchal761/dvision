import{u as w,q as N,r as i,j as e}from"./index-BPKQ2keO.js";import{g as h}from"./api-BdrZRD_7.js";const C=()=>{const l=w(),{id:c}=N(),[t,d]=i.useState({title:"",description:"",order:0,status:"Active"}),[m,x]=i.useState(""),[f,p]=i.useState(!1),[n,u]=i.useState(!1),[v,b]=i.useState(!0),[g,o]=i.useState("");i.useEffect(()=>{c&&(async()=>{try{b(!0),o("");const s=await h.getById(c);if(s.success&&s.data?.banner){const r=s.data.banner;d({title:r.title||"",description:r.description||"",order:r.order||0,status:r.isActive?"Active":"Inactive"}),x(r.image||"")}else o("Banner not found"),setTimeout(()=>l("/admin/banners"),2e3)}catch(s){o(s.message||"Failed to load banner"),console.error("Error fetching banner:",s),setTimeout(()=>l("/admin/banners"),2e3)}finally{b(!1)}})()},[c,l]);const j=a=>{const s=a.target.files[0];if(s){const r=new FileReader;r.onloadend=()=>{x(r.result),p(!0)},r.readAsDataURL(s)}},y=async a=>{a.preventDefault(),o(""),u(!0);try{const s={title:t.title,description:t.description||void 0,order:parseInt(t.order)||0,isActive:t.status==="Active"};f&&m&&(s.imageBase64=m);const r=await h.update(c,s);r.success?l("/admin/banners"):o(r.message||"Failed to update banner")}catch(s){o(s.message||"Failed to update banner. Please try again."),console.error("Error updating banner:",s)}finally{u(!1)}};return v?e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#1e3a5f]"}),e.jsx("p",{className:"mt-4 text-gray-500 text-sm",children:"Loading banner data..."})]})}):e.jsx("div",{className:"min-h-screen bg-white",children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pt-2 sm:pt-3",children:[e.jsx("div",{className:"pb-1 sm:pb-2",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>l("/admin/banners"),className:"text-[#1e3a5f] hover:text-[#2a4a6f] transition-colors",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsx("h1",{className:"text-sm sm:text-base md:text-lg lg:text-xl font-bold text-[#1e3a5f]",children:"Edit Banner"})]})}),g&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-lg text-xs sm:text-sm mt-2 sm:mt-3",children:g}),e.jsx("div",{className:"mt-2 sm:mt-3",children:e.jsxs("form",{onSubmit:y,className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-3 sm:p-4 md:p-5",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Banner Image ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[m?e.jsx("img",{src:m,alt:"Preview",className:"h-24 w-36 sm:h-28 sm:w-40 md:h-32 md:w-48 object-cover rounded-lg sm:rounded-xl border-2 border-gray-200"}):e.jsx("div",{className:"h-24 w-36 sm:h-28 sm:w-40 md:h-32 md:w-48 bg-gray-100 rounded-lg sm:rounded-xl border-2 border-dashed border-gray-300 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("label",{className:"flex-1 w-full sm:w-auto cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"hidden",disabled:n}),e.jsx("div",{className:"w-full sm:w-auto px-4 sm:px-6 py-2 text-xs sm:text-sm bg-gradient-to-r from-[#1e3a5f] to-[#2a4a6f] hover:from-[#2a4a6f] hover:to-[#1e3a5f] text-white rounded-lg font-semibold transition-all duration-200 text-center disabled:opacity-50",children:m?"Change Image":"Upload Image"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:t.title,onChange:a=>d({...t,title:a.target.value}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200",placeholder:"Enter banner title",disabled:n})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:a=>d({...t,description:a.target.value}),rows:"3",className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200",placeholder:"Enter banner description",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"Order"}),e.jsx("input",{type:"number",min:"0",value:t.order,onChange:a=>d({...t,order:a.target.value}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200",placeholder:"0",disabled:n})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:t.status,onChange:a=>d({...t,status:a.target.value}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 bg-white",disabled:n,children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 sm:gap-3 pt-3 sm:pt-4",children:[e.jsx("button",{type:"button",onClick:()=>l("/admin/banners"),disabled:n,className:"w-full sm:w-auto px-4 sm:px-6 py-2 text-xs sm:text-sm border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"w-full sm:w-auto px-4 sm:px-6 py-2 text-xs sm:text-sm bg-gradient-to-r from-[#1e3a5f] to-[#2a4a6f] hover:from-[#2a4a6f] hover:to-[#1e3a5f] text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:n?"Saving...":"Update Banner"})]})]})})]})})};export{C as default};
