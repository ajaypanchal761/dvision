import{u as oe,q as ie,r as f,j as r,F as K}from"./index-BPKQ2keO.js";import{c as ce,h as y,t as B}from"./api-BdrZRD_7.js";const me=()=>{const A=oe(),{classId:N}=ie(),g=!!N,[x,Q]=f.useState(N||""),[X,O]=f.useState([]),[z,S]=f.useState([]),[M,E]=f.useState({}),[Y,C]=f.useState({}),[H,w]=f.useState(!1),[Z,P]=f.useState(!0),[U,b]=f.useState(""),[q,L]=f.useState(""),[V,j]=f.useState({}),_=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],D=o=>{if(!o)return{hour:"",minute:"",ampm:"AM"};const[i,c]=o.split(":").map(Number),n=i>=12?"PM":"AM";let e=i%12;return e===0&&(e=12),{hour:e.toString(),minute:c.toString().padStart(2,"0"),ampm:n}},T=(o,i,c)=>{if(!o||!i)return"";let n=parseInt(o);const e=parseInt(i);return isNaN(n)||isNaN(e)||n<1||n>12||e<0||e>59?"":(c==="PM"&&n!==12?n+=12:c==="AM"&&n===12&&(n=0),`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`)},[F,$]=f.useState({Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[],Saturday:[],Sunday:[]});f.useEffect(()=>{(async()=>{if(!g)try{P(!0);const i=await ce.getAllWithoutPagination({isActive:!0});if(i.success&&i.data?.classes){const c=i.data.classes,n=await y.getAll();if(n.success&&n.data?.timetables){const e=new Set(n.data.timetables.map(t=>t.classId?._id||t.classId).filter(t=>t)),s=c.filter(t=>!e.has(t._id.toString()));O(s)}else O(c)}}catch(i){console.error("Error fetching classes:",i),b("Failed to load classes. Please refresh the page.")}finally{P(!1)}})()},[g]),f.useEffect(()=>{g&&(async()=>{if(!(!g||!N))try{P(!0);const i=await y.getAll({classId:N});if(i.success&&i.data?.timetables){const c=i.data.timetables,n={Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[],Saturday:[],Sunday:[]};if(c.forEach(e=>{const s=e.dayOfWeek;if(s&&n[s]){const t=D(e.startTime),a=D(e.endTime);n[s].push({subjectId:e.subjectId?._id||e.subjectId,teacherId:e.teacherId?._id||e.teacherId,startTime:e.startTime,endTime:e.endTime,startHour:t.hour,startMinute:t.minute,startAmpm:t.ampm,endHour:a.hour,endMinute:a.minute,endAmpm:a.ampm})}}),$(n),c.length>0){const e=c[0],s=e.classId?._id||e.classId;if(s)try{const t=await y.getSubjectsByClass(s);if(t.success&&t.data?.subjects){S(t.data.subjects);const l=t.data.subjects.map(m=>m._id).map(async m=>{try{const p=await y.getTeachersBySubject(m);if(p.success&&p.data?.teachers)return{subjectId:m,teachers:p.data.teachers}}catch(p){console.error(`Error fetching teachers for subject ${m}:`,p)}return{subjectId:m,teachers:[]}}),v=await Promise.all(l),d={};v.forEach(m=>{d[m.subjectId]=m.teachers}),E(d);const h=new Set;Object.values(d).forEach(m=>{m.forEach(p=>h.add(p._id))});const W=Array.from(h).map(async m=>{try{const p=await B.getById(m);if(p.success&&p.data?.teacher){const ne=(p.data.teacher.subjects||[]).map(R=>typeof R=="object"?R._id:R);return{teacherId:m,subjects:ne}}}catch(p){console.error(`Error fetching teacher ${m}:`,p)}return{teacherId:m,subjects:[]}}),k=await Promise.all(W),J={};k.forEach(m=>{J[m.teacherId]=m.subjects}),C(J)}}catch(t){console.error("Error fetching subjects:",t)}}}}catch(i){console.error("Error fetching existing timetables:",i),b("Failed to load existing timetables")}finally{P(!1)}})()},[g,N]),f.useEffect(()=>{(async()=>{if(!x){S([]),E({}),C({}),$({Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[],Saturday:[],Sunday:[]});return}try{const i=await y.getSubjectsByClass(x);if(i.success&&i.data?.subjects){S(i.data.subjects);const n=i.data.subjects.map(d=>d._id).map(async d=>{try{const h=await y.getTeachersBySubject(d);if(h.success&&h.data?.teachers)return{subjectId:d,teachers:h.data.teachers}}catch(h){console.error(`Error fetching teachers for subject ${d}:`,h)}return{subjectId:d,teachers:[]}}),e=await Promise.all(n),s={};e.forEach(d=>{s[d.subjectId]=d.teachers}),E(s);const t=new Set;Object.values(s).forEach(d=>{d.forEach(h=>t.add(h._id))});const a=Array.from(t).map(async d=>{try{const h=await B.getById(d);if(h.success&&h.data?.teacher){const W=(h.data.teacher.subjects||[]).map(k=>typeof k=="object"?k._id:k);return{teacherId:d,subjects:W}}}catch(h){console.error(`Error fetching teacher ${d}:`,h)}return{teacherId:d,subjects:[]}}),l=await Promise.all(a),v={};l.forEach(d=>{v[d.teacherId]=d.subjects}),C(v)}else S([])}catch(i){console.error("Error fetching data:",i),S([])}})()},[x]);const I=async o=>{if(!(!o||M[o]))try{const i=await y.getTeachersBySubject(o);if(i.success&&i.data?.teachers){E(s=>({...s,[o]:i.data.teachers}));const c=i.data.teachers.map(async s=>{try{const t=await B.getById(s._id);if(t.success&&t.data?.teacher)return{_id:s._id,subjects:t.data.teacher.subjects||[]}}catch(t){console.error(`Error fetching teacher ${s._id}:`,t)}return{_id:s._id,subjects:[]}}),n=await Promise.all(c),e={};n.forEach(s=>{e[s._id]=s.subjects.map(t=>typeof t=="object"?t._id:t)}),C(s=>({...s,...e}))}}catch(i){console.error("Error fetching teachers:",i)}},ee=async o=>{if(!(!o||Y[o]))try{const i=await B.getById(o);if(i.success&&i.data?.teacher){const c=(i.data.teacher.subjects||[]).map(n=>typeof n=="object"?n._id:n);C(n=>({...n,[o]:c}))}}catch(i){console.error("Error fetching teacher data:",i)}},te=o=>{$(i=>({...i,[o]:[...i[o],{subjectId:"",teacherId:"",startTime:"",endTime:"",startHour:"",startMinute:"",startAmpm:"AM",endHour:"",endMinute:"",endAmpm:"AM"}]}))},se=(o,i)=>{$(c=>({...c,[o]:c[o].filter((n,e)=>e!==i)}))},u=(o,i,c,n)=>{$(e=>{const s={...e},t=[...s[o]];if(t[i]={...t[i],[c]:n},c==="subjectId"&&(n&&I(n),n&&t[i].teacherId&&((M[n]||[]).map(v=>v._id).includes(t[i].teacherId)||(t[i].teacherId=""))),c==="teacherId"&&(n&&ee(n),n&&t[i].subjectId&&((M[t[i].subjectId]||[]).map(v=>v._id).includes(n)||(t[i].subjectId=""))),c==="startTime"&&n&&!t[i].startHour){const a=D(n);t[i].startHour=a.hour,t[i].startMinute=a.minute,t[i].startAmpm=a.ampm}if(c==="endTime"&&n&&!t[i].endHour){const a=D(n);t[i].endHour=a.hour,t[i].endMinute=a.minute,t[i].endAmpm=a.ampm}return s[o]=t,s})},G=o=>!o||!M[o]?[]:M[o]||[],re=async o=>{if(o.preventDefault(),b(""),L(""),w(!0),!_.some(e=>F[e].some(t=>t.subjectId&&t.teacherId&&t.startTime&&t.endTime))){b("Please add at least one complete class (Subject, Teacher, Start Time, End Time)"),w(!1);return}const c=[];if(_.forEach(e=>{F[e].forEach((t,a)=>{(t.subjectId||t.teacherId||t.startTime||t.endTime)&&(!t.subjectId||!t.teacherId||!t.startTime||!t.endTime?c.push(`${e} - Class ${a+1}: Please fill all required fields`):t.startTime>=t.endTime&&c.push(`${e} - Class ${a+1}: End time must be after start time`))})}),c.length>0){b(c.join(". ")),w(!1);return}const n={classId:x,weeklySchedule:{}};_.forEach(e=>{const t=F[e].filter(a=>a.subjectId&&a.teacherId&&a.startTime&&a.endTime);t.length>0&&(n.weeklySchedule[e]=t.map(a=>({subjectId:a.subjectId,teacherId:a.teacherId,startTime:a.startTime,endTime:a.endTime})))});try{if(g){const e=await y.getAll({classId:x});if(e.success&&e.data?.timetables){const t=e.data.timetables.map(a=>y.delete(a._id));await Promise.all(t)}const s=await y.createBulk(n);if(s.success){if(s.data.errors&&s.data.errors.length>0){const t=s.data.errors.map(a=>{let l=a.error;return l.includes("Only one class can be scheduled")?l=`âš ï¸ ${l}`:l.includes("Teacher")&&l.includes("already assigned")?l=`ðŸ‘¤ ${l}`:l=`âŒ ${l}`,l});b(t.join(`

`)),w(!1);return}L(`Successfully updated ${s.data.created} timetable(s)`),setTimeout(()=>{A(`/admin/timetable/course/${x}`)},2e3)}else if(s.data&&s.data.errors&&s.data.errors.length>0){const t=s.data.errors.map(a=>{let l=a.error;return l.includes("Only one class can be scheduled")?l=`âš ï¸ ${l}`:l.includes("Teacher")&&l.includes("already assigned")?l=`ðŸ‘¤ ${l}`:l=`âŒ ${l}`,l});b(t.join(`

`))}else b(s.message||"Failed to update timetable")}else{const e=await y.createBulk(n);if(e.success){if(e.data.errors&&e.data.errors.length>0){const s=e.data.errors.map(t=>{let a=t.error;return a.includes("Only one class can be scheduled")?a=`âš ï¸ ${a}`:a.includes("Teacher")&&a.includes("already assigned")?a=`ðŸ‘¤ ${a}`:a=`âŒ ${a}`,a});b(s.join(`

`)),w(!1);return}L(`Successfully created ${e.data.created} timetable(s)`),setTimeout(()=>{A("/admin/timetable")},2e3)}else if(e.data&&e.data.errors&&Array.isArray(e.data.errors)&&e.data.errors.length>0){const s=e.data.errors.map(t=>{let a=t.error||t.message||"Unknown error";return a.includes("Only one class can be scheduled")?a=`âš ï¸ ${a}`:a.includes("Teacher")&&(a.includes("already assigned")||a.includes("busy hai"))?a=`ðŸ‘¤ ${a}`:a=`âŒ ${a}`,a});b(s.join(`

`))}else{const s=e.message||e.error||"Failed to create timetable";b(`âŒ ${s}

Please check:
- All required fields are filled
- No time conflicts exist
- Teachers are available at selected times`)}}}catch(e){if(console.error(`Error ${g?"updating":"creating"} timetable:`,e),e.response?.data?.errors&&Array.isArray(e.response.data.errors)){const s=e.response.data.errors.map(t=>{let a=t.error||t.message||"Unknown error";return a.includes("Only one class can be scheduled")?a=`âš ï¸ ${a}`:a.includes("Teacher")&&a.includes("already assigned")?a=`ðŸ‘¤ ${a}`:a=`âŒ ${a}`,a});b(s.join(`

`))}else if(e.data?.errors&&Array.isArray(e.data.errors)){const s=e.data.errors.map(t=>{let a=t.error||t.message||"Unknown error";return a.includes("Only one class can be scheduled")?a=`âš ï¸ ${a}`:a.includes("Teacher")&&a.includes("already assigned")?a=`ðŸ‘¤ ${a}`:a=`âŒ ${a}`,a});b(s.join(`

`))}else if(e.message&&e.message.includes("Failed to create any timetables"))b(e.message+`

Please check the console for detailed error information.`);else{const s=e.message||e.error||`Failed to ${g?"update":"create"} timetable. Please try again.`;b(`âŒ ${s}

If this error persists, please check:
- All fields are filled correctly
- No time conflicts exist
- Teachers are available at the selected time`)}}finally{w(!1)}},ae=o=>o.type==="preparation"?`${o.name} (Preparation)`:`Class ${o.class} - ${o.board}`;return Z?r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-dvision-blue mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 font-medium",children:"Loading data..."})]})}):r.jsx("div",{className:"min-h-screen bg-white",children:r.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pt-2 sm:pt-3",children:[r.jsx("div",{className:"pb-1 sm:pb-2",children:r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[r.jsx("button",{onClick:()=>A("/admin/timetable"),className:"text-[#1e3a5f] hover:text-[#2a4a6f] transition-colors",children:r.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),r.jsx("h1",{className:"text-sm sm:text-base md:text-lg lg:text-xl font-bold text-[#1e3a5f]",children:g?"Edit Weekly Timetable":"Create Weekly Timetable"})]})}),r.jsx("div",{className:"mt-2 sm:mt-3",children:r.jsxs("form",{onSubmit:re,className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-3 sm:p-4 md:p-5",children:[r.jsx("h2",{className:"text-sm sm:text-base font-bold text-gray-800 mb-3 sm:mb-4",children:"Step 1: Select Course/Class"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Class ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{required:!0,value:x,onChange:o=>Q(o.target.value),disabled:g,className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Select Class"}),X.map(o=>r.jsx("option",{value:o._id,children:ae(o)},o._id))]})]})]}),x&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-3 sm:p-4 md:p-5",children:[r.jsx("h2",{className:"text-sm sm:text-base font-bold text-gray-800 mb-3 sm:mb-4",children:"Step 2: Weekly Schedule (Monday - Sunday)"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4",children:"Fill the schedule for each day. Leave empty if no class on that day."}),r.jsx("div",{className:"space-y-4 sm:space-y-5",children:_.map(o=>{const i=F[o]||[];return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 bg-gray-50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-xs sm:text-sm font-bold text-gray-800",children:o}),r.jsxs("button",{type:"button",onClick:()=>te(o),className:"px-2 sm:px-3 py-1 text-xs bg-[#1e3a5f] text-white rounded-lg hover:bg-[#2a4a6f] transition-colors flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Class"]})]}),i.length===0?r.jsx("p",{className:"text-xs text-gray-500 italic",children:'No classes added. Click "Add Class" to add one.'}):r.jsx("div",{className:"space-y-3 sm:space-y-4",children:i.map((c,n)=>r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"text-xs font-semibold text-gray-600",children:["Class ",n+1]}),r.jsx("button",{type:"button",onClick:()=>se(o,n),className:"text-red-600 hover:text-red-700 p-1",title:"Remove Class",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:"Subject"}),r.jsxs("select",{value:c.subjectId,onChange:e=>u(o,n,"subjectId",e.target.value),disabled:!x||z.length===0,className:"w-full px-3 py-2 text-xs border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Select Subject"}),z.map(e=>r.jsx("option",{value:e._id,children:e.name},e._id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:"Teacher"}),r.jsxs("select",{value:c.teacherId,onChange:e=>u(o,n,"teacherId",e.target.value),disabled:!x||!c.subjectId,className:"w-full px-3 py-2 text-xs border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:c.subjectId?G(c.subjectId).length===0?"No teachers assigned to this subject":"Select Teacher":"Select Subject First"}),G(c.subjectId).map(e=>r.jsxs("option",{value:e._id,children:[e.name," ",e.email?`(${e.email})`:""]},e._id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:"Start Time"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("input",{type:"number",min:"1",max:"12",placeholder:"11",value:c.startHour||"",onChange:e=>{const s=e.target.value;if(s===""||parseInt(s)>=1&&parseInt(s)<=12){const t=T(s,c.startMinute||"",c.startAmpm||"AM");u(o,n,"startHour",s),u(o,n,"startTime",t)}},className:"w-12 px-1.5 py-1.5 text-center text-xs font-medium text-gray-800 bg-transparent focus:outline-none border-b-2 border-gray-300 focus:border-[#1e3a5f]"}),r.jsx("span",{className:"text-gray-800 text-xs font-bold",children:":"}),r.jsx("input",{type:"number",min:"0",max:"59",placeholder:"00",value:c.startMinute||"",onChange:e=>{const s=e.target.value;if(s===""||parseInt(s)>=0&&parseInt(s)<=59){const t=s===""?"":s.padStart(2,"0"),a=T(c.startHour||"",t,c.startAmpm||"AM");u(o,n,"startMinute",t),u(o,n,"startTime",a)}},className:"w-12 px-1.5 py-1.5 text-center text-xs font-medium text-gray-800 bg-transparent focus:outline-none border-b-2 border-gray-300 focus:border-[#1e3a5f]"}),r.jsxs("div",{className:"relative ml-1",children:[r.jsxs("button",{type:"button",onClick:()=>{const e=`${o}-${n}-start`;j(s=>({...s,[e]:!s[e]}))},className:"px-1 py-1.5 text-xs font-medium text-gray-800 bg-transparent focus:outline-none flex items-center gap-0.5",children:[r.jsx("span",{children:c.startAmpm||"AM"}),r.jsx(K,{className:"text-gray-500 text-xs"})]}),V[`${o}-${n}-start`]&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{const e=`${o}-${n}-start`;j(s=>({...s,[e]:!1}))}}),r.jsxs("div",{className:"absolute z-20 w-12 mt-1 bg-white border border-gray-300 rounded shadow-lg",children:[r.jsx("button",{type:"button",onClick:()=>{const e=T(c.startHour||"",c.startMinute||"","AM");u(o,n,"startAmpm","AM"),u(o,n,"startTime",e);const s=`${o}-${n}-start`;j(t=>({...t,[s]:!1}))},className:"w-full px-2 py-1.5 text-left hover:bg-gray-50 transition-colors text-xs font-medium border-b border-gray-100",children:"AM"}),r.jsx("button",{type:"button",onClick:()=>{const e=T(c.startHour||"",c.startMinute||"","PM");u(o,n,"startAmpm","PM"),u(o,n,"startTime",e);const s=`${o}-${n}-start`;j(t=>({...t,[s]:!1}))},className:"w-full px-2 py-1.5 text-left hover:bg-gray-50 transition-colors text-xs font-medium",children:"PM"})]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:"End Time"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("input",{type:"number",min:"1",max:"12",placeholder:"11",value:c.endHour||"",onChange:e=>{const s=e.target.value;if(s===""||parseInt(s)>=1&&parseInt(s)<=12){const t=T(s,c.endMinute||"",c.endAmpm||"AM");u(o,n,"endHour",s),u(o,n,"endTime",t)}},className:"w-12 px-1.5 py-1.5 text-center text-xs font-medium text-gray-800 bg-transparent focus:outline-none border-b-2 border-gray-300 focus:border-[#1e3a5f]"}),r.jsx("span",{className:"text-gray-800 text-xs font-bold",children:":"}),r.jsx("input",{type:"number",min:"0",max:"59",placeholder:"00",value:c.endMinute||"",onChange:e=>{const s=e.target.value;if(s===""||parseInt(s)>=0&&parseInt(s)<=59){const t=s===""?"":s.padStart(2,"0"),a=T(c.endHour||"",t,c.endAmpm||"AM");u(o,n,"endMinute",t),u(o,n,"endTime",a)}},className:"w-12 px-1.5 py-1.5 text-center text-xs font-medium text-gray-800 bg-transparent focus:outline-none border-b-2 border-gray-300 focus:border-[#1e3a5f]"}),r.jsxs("div",{className:"relative ml-1",children:[r.jsxs("button",{type:"button",onClick:()=>{const e=`${o}-${n}-end`;j(s=>({...s,[e]:!s[e]}))},className:"px-1 py-1.5 text-xs font-medium text-gray-800 bg-transparent focus:outline-none flex items-center gap-0.5",children:[r.jsx("span",{children:c.endAmpm||"AM"}),r.jsx(K,{className:"text-gray-500 text-xs"})]}),V[`${o}-${n}-end`]&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{const e=`${o}-${n}-end`;j(s=>({...s,[e]:!1}))}}),r.jsxs("div",{className:"absolute z-20 w-12 mt-1 bg-white border border-gray-300 rounded shadow-lg",children:[r.jsx("button",{type:"button",onClick:()=>{const e=T(c.endHour||"",c.endMinute||"","AM");u(o,n,"endAmpm","AM"),u(o,n,"endTime",e);const s=`${o}-${n}-end`;j(t=>({...t,[s]:!1}))},className:"w-full px-2 py-1.5 text-left hover:bg-gray-50 transition-colors text-xs font-medium border-b border-gray-100",children:"AM"}),r.jsx("button",{type:"button",onClick:()=>{const e=T(c.endHour||"",c.endMinute||"","PM");u(o,n,"endAmpm","PM"),u(o,n,"endTime",e);const s=`${o}-${n}-end`;j(t=>({...t,[s]:!1}))},className:"w-full px-2 py-1.5 text-left hover:bg-gray-50 transition-colors text-xs font-medium",children:"PM"})]})]})]})]})]})]})]},n))})]},o)})})]}),U&&r.jsxs("div",{className:"bg-red-50 border-2 border-red-300 text-red-700 px-4 py-3 rounded-lg text-xs sm:text-sm mt-4 mb-2 whitespace-pre-line shadow-sm",children:[r.jsxs("div",{className:"font-semibold mb-1 flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Error Details:"]}),r.jsx("div",{className:"pl-6",children:U})]}),q&&r.jsxs("div",{className:"bg-green-50 border-2 border-green-300 text-green-700 px-4 py-3 rounded-lg text-xs sm:text-sm mt-4 mb-2 whitespace-pre-line shadow-sm",children:[r.jsxs("div",{className:"font-semibold mb-1 flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Success:"]}),r.jsx("div",{className:"pl-6",children:q})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 sm:gap-3 pt-3 sm:pt-4",children:[r.jsx("button",{type:"button",onClick:()=>A("/admin/timetable"),disabled:H,className:"w-full sm:w-auto px-4 sm:px-6 py-2 text-xs sm:text-sm border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:H||!x,className:"w-full sm:w-auto px-4 sm:px-6 py-2 text-xs sm:text-sm bg-gradient-to-r from-[#1e3a5f] to-[#2a4a6f] hover:from-[#2a4a6f] hover:to-[#1e3a5f] text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:H?g?"Updating...":"Creating...":g?"Update Weekly Timetable":"Create Weekly Timetable"})]})]})})]})})};export{me as default};
