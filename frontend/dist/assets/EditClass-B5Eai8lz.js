import{u as v,q as j,r as d,j as e}from"./index-BPKQ2keO.js";import{c as p}from"./api-BdrZRD_7.js";const C=()=>{const i=v(),{id:c}=j(),[s,o]=d.useState({type:"regular",class:"",board:"",name:"",description:"",classCode:"",isActive:!0}),[l,m]=d.useState(!1),[g,x]=d.useState(!0),[u,n]=d.useState(""),b=["1","2","3","4","5","6","7","8","9","10","11","12"],f=["RBSE","CBSE"];d.useEffect(()=>{c&&(async()=>{try{x(!0),n("");const r=await p.getById(c);if(r.success&&r.data?.class){const t=r.data.class;o({type:t.type||"regular",class:t.class?t.class.toString():"",board:t.board||"",name:t.name||"",description:t.description||"",classCode:t.classCode||"",isActive:t.isActive!==void 0?t.isActive:!0})}else n("Class not found"),setTimeout(()=>i("/admin/classes"),2e3)}catch(r){console.error("Error fetching class:",r),n(r.message||"Failed to load class data"),setTimeout(()=>i("/admin/classes"),2e3)}finally{x(!1)}})()},[c,i]);const h=async a=>{a.preventDefault(),n(""),m(!0);const r={type:s.type,classCode:s.classCode.trim().toUpperCase(),isActive:s.isActive};s.type==="regular"?(r.class=parseInt(s.class),r.board=s.board.trim()):(r.name=s.name.trim(),s.description&&(r.description=s.description.trim())),console.log("Updating class data:",r);try{const t=await p.update(c,r);console.log("API Response:",t),t.success?i("/admin/classes"):n(t.message||"Failed to update class")}catch(t){console.error("Error updating class:",t),n(t.message||"Failed to update class. Please try again.")}finally{m(!1)}};return g?e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 sm:h-10 sm:w-10 border-b-2 border-[#1e3a5f] mx-auto mb-2 sm:mb-3"}),e.jsx("p",{className:"text-gray-500 font-medium text-xs sm:text-sm",children:"Loading class data..."})]})}):e.jsx("div",{className:"min-h-screen bg-white",children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pt-2 sm:pt-3",children:[e.jsx("div",{className:"pb-1 sm:pb-2",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>i("/admin/classes"),className:"text-[#1e3a5f] hover:text-[#2a4a6f] transition-colors",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsx("h1",{className:"text-sm sm:text-base md:text-lg lg:text-xl font-bold text-[#1e3a5f]",children:"Edit Class"})]})}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-lg text-xs sm:text-sm mt-2 sm:mt-3",children:u}),e.jsx("div",{className:"mt-2 sm:mt-3",children:e.jsxs("form",{onSubmit:h,className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-3 sm:p-4 md:p-5",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Class Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:s.type,onChange:a=>o({...s,type:a.target.value,class:"",board:"",name:"",description:""}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 bg-white",disabled:l,children:[e.jsx("option",{value:"regular",children:"Regular Class (Board-based)"}),e.jsx("option",{value:"preparation",children:"Preparation Class (NDA, NEET, JEE, etc.)"})]})]}),s.type==="regular"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Class ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:s.class,onChange:a=>o({...s,class:a.target.value}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 bg-white",disabled:l,children:[e.jsx("option",{value:"",children:"Select Class"}),b.map(a=>e.jsxs("option",{value:a,children:["Class ",a]},a))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Board ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:s.board,onChange:a=>o({...s,board:a.target.value}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 bg-white",disabled:l,children:[e.jsx("option",{value:"",children:"Select Board"}),f.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Preparation Class Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:s.name,onChange:a=>o({...s,name:a.target.value}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200",placeholder:"e.g., NDA Special, NEET Prep, JEE Advanced",disabled:l})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Description ",e.jsx("span",{className:"text-gray-500 text-[10px]",children:"(Optional)"})]}),e.jsx("textarea",{value:s.description,onChange:a=>o({...s,description:a.target.value}),rows:"3",className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200",placeholder:"Enter description for this preparation class",disabled:l})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Class Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:s.classCode,onChange:a=>o({...s,classCode:a.target.value.toUpperCase()}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 font-mono bg-gray-50 placeholder:text-[10px] sm:placeholder:text-xs",placeholder:"Enter class code (e.g., CLASS12CBSE)",disabled:l})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:s.isActive?"Active":"Inactive",onChange:a=>o({...s,isActive:a.target.value==="Active"}),className:"w-full px-3 py-2 text-xs sm:text-sm border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-[#1e3a5f] focus:border-[#1e3a5f] outline-none transition-all duration-200 bg-white",disabled:l,children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-2 sm:gap-3 pt-3 sm:pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i("/admin/classes"),disabled:l,className:"w-full sm:w-auto px-4 sm:px-6 py-2 text-xs sm:text-sm border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"w-full sm:w-auto px-4 sm:px-6 py-2 text-xs sm:text-sm bg-gradient-to-r from-[#1e3a5f] to-[#2a4a6f] hover:from-[#2a4a6f] hover:to-[#1e3a5f] text-white rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:l?"Updating...":"Update Class"})]})]})})]})})};export{C as default};
