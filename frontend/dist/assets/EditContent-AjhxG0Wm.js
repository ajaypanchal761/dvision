import{u as f,q as v,a8 as j,r as x,j as e}from"./index-BPKQ2keO.js";import{j as i}from"./api-BdrZRD_7.js";const C=()=>{const d=f(),{id:p}=v(),a=j(),[t,m]=x.useState({type:"",contentType:"",title:"",content:"",version:"1.0.0"}),[o,u]=x.useState(!1),[y,b]=x.useState(!0),[g,l]=x.useState("");x.useEffect(()=>{const s=p||a.state?.content?.contentType;if(!s){d("/admin/content");return}(async()=>{try{b(!0),l("");let n;if(s==="about")n=await i.aboutUs.getAll();else if(s==="privacy")n=await i.privacy.getAll();else if(s==="terms")n=await i.terms.getAll();else throw new Error("Invalid content type");if(n.success&&n.data?.items&&n.data.items.length>0){const c=n.data.items[0];m({type:c.title||(s==="about"?"About Us":s==="privacy"?"Privacy Policy":"Terms and Conditions"),contentType:s,title:c.title||"",content:c.content||"",version:c.version||"1.0.0",_id:c._id})}else a.state?.content?m({type:a.state.content.type||"",contentType:a.state.content.contentType||s,title:a.state.content.title||"",content:a.state.content.content||"",version:a.state.content.version||"1.0.0",_id:a.state.content._id}):l("Content not found")}catch(n){l(n.message||"Failed to load content"),console.error("Error fetching content:",n)}finally{b(!1)}})()},[p,a.state,d]);const h=async s=>{s.preventDefault(),l(""),u(!0);try{if(!t.contentType||!t._id)throw new Error("Invalid content data");const r={title:t.title,content:t.content,version:t.version};let n;if(t.contentType==="about")n=await i.aboutUs.update(t._id,r);else if(t.contentType==="privacy")n=await i.privacy.update(t._id,r);else if(t.contentType==="terms")n=await i.terms.update(t._id,r);else throw new Error("Invalid content type");n.success?d("/admin/content"):l(n.message||"Failed to update content")}catch(r){l(r.message||"Failed to update content. Please try again."),console.error("Error updating content:",r)}finally{u(!1)}};return y?e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 border-b-2 border-dvision-blue"}),e.jsx("p",{className:"mt-3 sm:mt-4 text-gray-500 text-sm sm:text-base",children:"Loading content..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsxs("div",{className:"px-2 sm:px-3 md:px-4 lg:px-6 xl:px-8 pt-3 sm:pt-4 md:pt-5 lg:pt-6",children:[e.jsx("div",{className:"px-2 sm:px-3 md:px-4 lg:px-6 xl:px-8 pb-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4 sm:mb-5 md:mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-gray-900",children:["Edit ",t.type]}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mt-1",children:"Update the content information"})]}),e.jsxs("button",{onClick:()=>d("/admin/content"),className:"px-3 sm:px-4 md:px-5 lg:px-6 py-2 sm:py-2.5 md:py-3 border-2 border-gray-300 text-gray-700 rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm md:text-base transition-all duration-200 flex items-center justify-center space-x-2 hover:bg-gray-50",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),e.jsx("span",{children:"Back"})]})]})}),g&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 sm:px-4 py-2 sm:py-3 rounded-lg sm:rounded-xl text-xs sm:text-sm mb-4 sm:mb-5 md:mb-6",children:g}),e.jsx("div",{className:"px-2 sm:px-3 md:px-4 lg:px-6 xl:px-8",children:e.jsxs("form",{onSubmit:h,className:"space-y-4 sm:space-y-5 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:gap-5 lg:gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm md:text-base font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Content Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.type,disabled:!0,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-xs sm:text-sm md:text-base border-2 border-gray-200 rounded-lg sm:rounded-xl bg-gray-50 text-gray-600"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm md:text-base font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:t.title,onChange:s=>m({...t,title:s.target.value}),className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-xs sm:text-sm md:text-base border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-dvision-blue focus:border-dvision-blue outline-none transition-all duration-200",placeholder:"Enter title",disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm md:text-base font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"Version"}),e.jsx("input",{type:"text",value:t.version,onChange:s=>m({...t,version:s.target.value}),className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-xs sm:text-sm md:text-base border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-dvision-blue focus:border-dvision-blue outline-none transition-all duration-200",placeholder:"1.0.0",disabled:o})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs sm:text-sm md:text-base font-semibold text-gray-700 mb-1.5 sm:mb-2",children:["Content ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{required:!0,value:t.content,onChange:s=>m({...t,content:s.target.value}),rows:"12",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-xs sm:text-sm md:text-base border-2 border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-dvision-blue focus:border-dvision-blue outline-none transition-all duration-200",placeholder:"Enter content",disabled:o})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-3 sm:gap-4 pt-4 sm:pt-6",children:[e.jsx("button",{type:"button",onClick:()=>d("/admin/content"),disabled:o,className:"w-full sm:w-auto px-4 sm:px-6 md:px-8 py-2.5 sm:py-3 text-xs sm:text-sm md:text-base border-2 border-gray-300 text-gray-700 rounded-lg sm:rounded-xl font-semibold hover:bg-gray-50 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"w-full sm:w-auto px-4 sm:px-6 md:px-8 py-2.5 sm:py-3 text-xs sm:text-sm md:text-base bg-dvision-blue hover:bg-dvision-blue-dark text-white rounded-lg sm:rounded-xl font-semibold transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:o?"Updating...":"Update Content"})]})]})})]})})};export{C as default};
