import{u as y,r as d,j as s}from"./index-BPKQ2keO.js";import{j as n}from"./api-BdrZRD_7.js";const j=()=>{const x=y(),[p,g]=d.useState([]),[h,o]=d.useState(!0),[c,m]=d.useState(""),u=async()=>{try{o(!0),m("");const[e,a,r]=await Promise.all([n.aboutUs.getAll().catch(()=>({success:!1})),n.privacy.getAll().catch(()=>({success:!1})),n.terms.getAll().catch(()=>({success:!1}))]),i=[];if(e.success&&e.data){const t=(Array.isArray(e.data.items)?e.data.items:e.data.aboutUs?[e.data.aboutUs]:[])[0];t&&i.push({_id:t._id,id:t._id,type:"About Us",title:t.title||"About Us",content:t.content||"",version:t.version||"1.0.0",createDateTime:t.createdAt?new Date(t.createdAt).toLocaleString():"",contentType:"about"})}if(a.success&&a.data){const t=(Array.isArray(a.data.items)?a.data.items:a.data.privacy?[a.data.privacy]:[])[0];t&&i.push({_id:t._id,id:t._id,type:"Privacy Policy",title:t.title||"Privacy Policy",content:t.content||"",version:t.version||"1.0.0",createDateTime:t.createdAt?new Date(t.createdAt).toLocaleString():"",contentType:"privacy"})}if(r.success&&r.data){const t=(Array.isArray(r.data.items)?r.data.items:r.data.terms?[r.data.terms]:[])[0];t&&i.push({_id:t._id,id:t._id,type:"Terms and Conditions",title:t.title||"Terms and Conditions",content:t.content||"",version:t.version||"1.0.0",createDateTime:t.createdAt?new Date(t.createdAt).toLocaleString():"",contentType:"terms"})}g(i)}catch(e){m(e.message||"Failed to load content"),console.error("Error fetching content:",e)}finally{o(!1)}};d.useEffect(()=>{u()},[]);const b=e=>{x(`/admin/content/edit/${e.contentType}`,{state:{content:e}})};return s.jsx("div",{className:"min-h-screen bg-white",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pt-3 sm:pt-4 md:pt-5 lg:pt-6",children:[s.jsx("div",{className:"pb-0",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-white",children:"Manage Content"}),s.jsx("p",{className:"text-white/80 text-xs sm:text-sm mt-1",children:"Manage About Us, Privacy Policy, and Terms & Conditions"})]})}),c&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-lg text-xs sm:text-sm mt-2 sm:mt-3",children:c}),h?s.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6 sm:p-8 md:p-10 text-center mt-3 sm:mt-4 md:mt-5 lg:mt-6",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-[#1e3a5f]"}),s.jsx("p",{className:"mt-2 sm:mt-3 text-gray-500 text-xs sm:text-sm",children:"Loading content..."})]}):s.jsx("div",{className:"mt-3 sm:mt-4 md:mt-5 lg:mt-6",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-5 lg:gap-6",children:p.map(e=>s.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:s.jsxs("div",{className:"p-3 sm:p-4 md:p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[s.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-bold text-gray-900",children:e.type}),s.jsxs("span",{className:"px-2 py-0.5 text-[10px] sm:text-xs font-semibold rounded-lg bg-blue-50 text-[#1e3a5f]",children:["v",e.version]})]}),s.jsxs("p",{className:"text-gray-600 text-xs mb-2 sm:mb-3 line-clamp-3",children:[e.content.substring(0,150),"..."]}),s.jsxs("div",{className:"text-[10px] sm:text-xs text-gray-500 mb-2 sm:mb-3",children:["Last updated: ",e.createDateTime]}),s.jsx("button",{onClick:()=>b(e),className:"w-full px-3 sm:px-4 py-2 bg-gradient-to-r from-[#1e3a5f] to-[#2a4a6f] hover:from-[#2a4a6f] hover:to-[#1e3a5f] text-white rounded-lg font-semibold text-xs sm:text-sm transition-all duration-200 shadow-md hover:shadow-lg",children:"Edit Content"})]})},e._id||e.id))})})]})})};export{j as default};
